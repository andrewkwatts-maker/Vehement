{
    "id": "shadow_lord",
    "type": "hero",
    "race": "vampires",
    "name": "Shadow Lord",
    "title": "Master of Darkness",

    "sdf_model": {
        "name": "Shadow Lord Model",
        "root": {
            "name": "body_root",
            "type": "group",
            "transform": {"position": [0, 0, 0], "rotation": [0, 0, 0, 1], "scale": [1, 1, 1]},
            "children": [
                {
                    "name": "torso",
                    "type": "Capsule",
                    "operation": "Union",
                    "transform": {"position": [0, 1.1, 0], "rotation": [0.03, 0, 0, 0.9995], "scale": [1, 1, 0.8]},
                    "parameters": {"height": 0.32, "topRadius": 0.11, "bottomRadius": 0.09},
                    "material": {"baseColor": [0.02, 0.01, 0.03, 1.0], "metallic": 0.4, "roughness": 0.6}
                },
                {
                    "name": "shadow_robes",
                    "type": "Cone",
                    "operation": "Union",
                    "transform": {"position": [0, 0.6, 0], "rotation": [0, 0, 0, 1], "scale": [1, 1, 0.85]},
                    "parameters": {"height": 0.8, "topRadius": 0.12, "bottomRadius": 0.35},
                    "material": {"baseColor": [0.01, 0.005, 0.02, 0.95], "metallic": 0.15, "roughness": 0.9}
                },
                {
                    "name": "shadow_tendrils",
                    "type": "Ellipsoid",
                    "operation": "Union",
                    "transform": {"position": [0, 0.15, -0.15], "rotation": [0.2, 0, 0, 0.98], "scale": [1, 1, 1]},
                    "parameters": {"radii": [0.3, 0.08, 0.4]},
                    "material": {"baseColor": [0.01, 0.005, 0.015, 0.7], "metallic": 0.1, "roughness": 0.95},
                    "bone_id": "shadow_trail"
                },
                {
                    "name": "hood",
                    "type": "Ellipsoid",
                    "operation": "Union",
                    "transform": {"position": [0, 1.45, -0.02], "rotation": [0, 0, 0, 1], "scale": [1, 1, 1]},
                    "parameters": {"radii": [0.12, 0.15, 0.14]},
                    "material": {"baseColor": [0.02, 0.01, 0.025, 1.0], "metallic": 0.2, "roughness": 0.85}
                },
                {
                    "name": "hood_void",
                    "type": "Ellipsoid",
                    "operation": "Subtraction",
                    "transform": {"position": [0, 1.42, 0.06], "rotation": [0, 0, 0, 1], "scale": [1, 1, 1]},
                    "parameters": {"radii": [0.08, 0.1, 0.1]},
                    "material": {"baseColor": [0, 0, 0, 1]}
                },
                {
                    "name": "eye_left",
                    "type": "Sphere",
                    "operation": "Union",
                    "transform": {"position": [-0.03, 1.43, 0.1], "rotation": [0, 0, 0, 1], "scale": [1, 0.4, 1]},
                    "parameters": {"radius": 0.015},
                    "material": {"baseColor": [0.6, 0, 0.4, 1.0], "metallic": 0, "roughness": 0.1, "emissive": 1.0, "emissiveColor": [0.8, 0, 0.5]}
                },
                {
                    "name": "eye_right",
                    "type": "Sphere",
                    "operation": "Union",
                    "transform": {"position": [0.03, 1.43, 0.1], "rotation": [0, 0, 0, 1], "scale": [1, 0.4, 1]},
                    "parameters": {"radius": 0.015},
                    "material": {"baseColor": [0.6, 0, 0.4, 1.0], "metallic": 0, "roughness": 0.1, "emissive": 1.0, "emissiveColor": [0.8, 0, 0.5]}
                },
                {
                    "name": "left_arm",
                    "type": "group",
                    "transform": {"position": [0.15, 1.2, 0], "rotation": [0, 0, 0, 1], "scale": [1, 1, 1]},
                    "bone_id": "left_arm",
                    "children": [
                        {
                            "name": "left_upper_arm",
                            "type": "Capsule",
                            "operation": "Union",
                            "transform": {"position": [0.08, -0.12, 0], "rotation": [0, 0, 0.22, 0.975], "scale": [1, 1, 1]},
                            "parameters": {"height": 0.25, "topRadius": 0.04, "bottomRadius": 0.032},
                            "material": {"baseColor": [0.02, 0.01, 0.025, 1.0], "metallic": 0.35, "roughness": 0.65}
                        },
                        {
                            "name": "left_forearm",
                            "type": "Capsule",
                            "operation": "Union",
                            "transform": {"position": [0.18, -0.25, 0], "rotation": [0, 0, 0.15, 0.99], "scale": [1, 1, 1]},
                            "parameters": {"height": 0.22, "topRadius": 0.03, "bottomRadius": 0.025},
                            "material": {"baseColor": [0.02, 0.01, 0.025, 1.0], "metallic": 0.35, "roughness": 0.65},
                            "bone_id": "left_forearm"
                        },
                        {
                            "name": "left_hand",
                            "type": "Ellipsoid",
                            "operation": "Union",
                            "transform": {"position": [0.25, -0.38, 0], "rotation": [0, 0, 0, 1], "scale": [1, 1, 1]},
                            "parameters": {"radii": [0.02, 0.035, 0.015]},
                            "material": {"baseColor": [0.6, 0.55, 0.5, 1.0], "metallic": 0, "roughness": 0.6},
                            "bone_id": "left_hand"
                        },
                        {
                            "name": "shadow_dagger",
                            "type": "group",
                            "transform": {"position": [0.26, -0.42, 0.05], "rotation": [0.5, 0, 0.1, 0.86], "scale": [1, 1, 1]},
                            "bone_id": "left_hand",
                            "children": [
                                {
                                    "name": "dagger_blade",
                                    "type": "RoundedBox",
                                    "operation": "Union",
                                    "transform": {"position": [0, 0.12, 0], "rotation": [0, 0, 0, 1], "scale": [1, 1, 1]},
                                    "parameters": {"dimensions": [0.008, 0.22, 0.003], "cornerRadius": 0.001},
                                    "material": {"baseColor": [0.15, 0.1, 0.18, 1.0], "metallic": 0.9, "roughness": 0.15}
                                },
                                {
                                    "name": "dagger_hilt",
                                    "type": "Cylinder",
                                    "operation": "Union",
                                    "transform": {"position": [0, 0, 0], "rotation": [0, 0, 0, 1], "scale": [1, 1, 1]},
                                    "parameters": {"height": 0.08, "topRadius": 0.012, "bottomRadius": 0.012},
                                    "material": {"baseColor": [0.05, 0.02, 0.06, 1.0], "metallic": 0.5, "roughness": 0.4}
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "right_arm",
                    "type": "group",
                    "transform": {"position": [-0.15, 1.2, 0], "rotation": [0, 0, 0, 1], "scale": [1, 1, 1]},
                    "bone_id": "right_arm",
                    "children": [
                        {
                            "name": "right_upper_arm",
                            "type": "Capsule",
                            "operation": "Union",
                            "transform": {"position": [-0.08, -0.12, 0], "rotation": [0, 0, -0.22, 0.975], "scale": [1, 1, 1]},
                            "parameters": {"height": 0.25, "topRadius": 0.04, "bottomRadius": 0.032},
                            "material": {"baseColor": [0.02, 0.01, 0.025, 1.0], "metallic": 0.35, "roughness": 0.65}
                        },
                        {
                            "name": "right_forearm",
                            "type": "Capsule",
                            "operation": "Union",
                            "transform": {"position": [-0.18, -0.25, 0], "rotation": [0, 0, -0.15, 0.99], "scale": [1, 1, 1]},
                            "parameters": {"height": 0.22, "topRadius": 0.03, "bottomRadius": 0.025},
                            "material": {"baseColor": [0.02, 0.01, 0.025, 1.0], "metallic": 0.35, "roughness": 0.65},
                            "bone_id": "right_forearm"
                        },
                        {
                            "name": "right_hand",
                            "type": "Ellipsoid",
                            "operation": "Union",
                            "transform": {"position": [-0.25, -0.38, 0], "rotation": [0, 0, 0, 1], "scale": [1, 1, 1]},
                            "parameters": {"radii": [0.02, 0.035, 0.015]},
                            "material": {"baseColor": [0.6, 0.55, 0.5, 1.0], "metallic": 0, "roughness": 0.6},
                            "bone_id": "right_hand"
                        },
                        {
                            "name": "shadow_dagger_right",
                            "type": "group",
                            "transform": {"position": [-0.26, -0.42, 0.05], "rotation": [0.5, 0, -0.1, 0.86], "scale": [1, 1, 1]},
                            "bone_id": "right_hand",
                            "children": [
                                {
                                    "name": "dagger_blade_r",
                                    "type": "RoundedBox",
                                    "operation": "Union",
                                    "transform": {"position": [0, 0.12, 0], "rotation": [0, 0, 0, 1], "scale": [1, 1, 1]},
                                    "parameters": {"dimensions": [0.008, 0.22, 0.003], "cornerRadius": 0.001},
                                    "material": {"baseColor": [0.15, 0.1, 0.18, 1.0], "metallic": 0.9, "roughness": 0.15}
                                },
                                {
                                    "name": "dagger_hilt_r",
                                    "type": "Cylinder",
                                    "operation": "Union",
                                    "transform": {"position": [0, 0, 0], "rotation": [0, 0, 0, 1], "scale": [1, 1, 1]},
                                    "parameters": {"height": 0.08, "topRadius": 0.012, "bottomRadius": 0.012},
                                    "material": {"baseColor": [0.05, 0.02, 0.06, 1.0], "metallic": 0.5, "roughness": 0.4}
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "shadow_aura_1",
                    "type": "Sphere",
                    "operation": "Union",
                    "transform": {"position": [-0.2, 0.8, -0.1], "rotation": [0, 0, 0, 1], "scale": [2, 0.5, 1]},
                    "parameters": {"radius": 0.06},
                    "material": {"baseColor": [0.05, 0, 0.08, 0.4], "metallic": 0, "roughness": 1, "emissive": 0.2, "emissiveColor": [0.1, 0, 0.15]},
                    "bone_id": "shadow_effect"
                },
                {
                    "name": "shadow_aura_2",
                    "type": "Sphere",
                    "operation": "Union",
                    "transform": {"position": [0.18, 1.0, -0.08], "rotation": [0, 0, 0, 1], "scale": [1.8, 0.6, 1]},
                    "parameters": {"radius": 0.05},
                    "material": {"baseColor": [0.05, 0, 0.08, 0.35], "metallic": 0, "roughness": 1, "emissive": 0.2, "emissiveColor": [0.1, 0, 0.15]},
                    "bone_id": "shadow_effect"
                }
            ]
        },

        "skeleton": {
            "bones": [
                {"name": "root", "parent": null, "position": [0, 0, 0], "rotation": [0, 0, 0, 1]},
                {"name": "spine", "parent": "root", "position": [0, 0.6, 0], "rotation": [0, 0, 0, 1]},
                {"name": "chest", "parent": "spine", "position": [0, 0.45, 0], "rotation": [0, 0, 0, 1]},
                {"name": "head", "parent": "chest", "position": [0, 0.38, 0], "rotation": [0, 0, 0, 1]},
                {"name": "left_arm", "parent": "chest", "position": [0.12, 0.12, 0], "rotation": [0, 0, 0, 1]},
                {"name": "left_forearm", "parent": "left_arm", "position": [0.1, -0.15, 0], "rotation": [0, 0, 0, 1]},
                {"name": "left_hand", "parent": "left_forearm", "position": [0.07, -0.14, 0], "rotation": [0, 0, 0, 1]},
                {"name": "right_arm", "parent": "chest", "position": [-0.12, 0.12, 0], "rotation": [0, 0, 0, 1]},
                {"name": "right_forearm", "parent": "right_arm", "position": [-0.1, -0.15, 0], "rotation": [0, 0, 0, 1]},
                {"name": "right_hand", "parent": "right_forearm", "position": [-0.07, -0.14, 0], "rotation": [0, 0, 0, 1]},
                {"name": "shadow_trail", "parent": "spine", "position": [0, -0.25, -0.1], "rotation": [0, 0, 0, 1]},
                {"name": "shadow_effect", "parent": "spine", "position": [0, 0.2, -0.05], "rotation": [0, 0, 0, 1]}
            ]
        }
    },

    "animations": {
        "idle": {
            "name": "Shadow Idle",
            "duration": 3.0,
            "loop": true,
            "keyframes": [
                {"time": 0.0, "bones": {"root": {"position": [0, 0.02, 0]}, "shadow_effect": {"rotation": [0, 0, 0, 1]}, "shadow_trail": {"rotation": [0, 0, 0, 1]}}},
                {"time": 1.5, "bones": {"root": {"position": [0, 0.05, 0]}, "shadow_effect": {"rotation": [0, 0.2, 0, 0.98]}, "shadow_trail": {"rotation": [0.05, 0, 0, 0.999]}}},
                {"time": 3.0, "bones": {"root": {"position": [0, 0.02, 0]}, "shadow_effect": {"rotation": [0, 0, 0, 1]}, "shadow_trail": {"rotation": [0, 0, 0, 1]}}}
            ]
        },
        "glide": {
            "name": "Shadow Glide",
            "duration": 0.8,
            "loop": true,
            "keyframes": [
                {"time": 0.0, "bones": {"root": {"position": [0, 0.08, 0]}, "chest": {"rotation": [0.08, 0, 0, 0.997]}, "shadow_trail": {"rotation": [0.2, 0, 0, 0.98]}}},
                {"time": 0.4, "bones": {"root": {"position": [0, 0.1, 0]}, "chest": {"rotation": [0.06, 0, 0, 0.998]}, "shadow_trail": {"rotation": [0.15, 0, 0, 0.99]}}},
                {"time": 0.8, "bones": {"root": {"position": [0, 0.08, 0]}, "chest": {"rotation": [0.08, 0, 0, 0.997]}, "shadow_trail": {"rotation": [0.2, 0, 0, 0.98]}}}
            ]
        },
        "attack": {
            "name": "Shadow Strike",
            "duration": 0.7,
            "loop": false,
            "events": [{"time": 0.35, "event": "deal_damage"}, {"time": 0.3, "event": "play_sound", "data": {"sound": "shadow_slash"}}],
            "keyframes": [
                {"time": 0.0, "bones": {"chest": {"rotation": [0, -0.15, 0, 0.99]}, "left_arm": {"rotation": [-0.3, 0, 0.4, 0.86]}, "right_arm": {"rotation": [-0.3, 0, -0.4, 0.86]}}},
                {"time": 0.2, "bones": {"chest": {"rotation": [-0.1, -0.2, 0, 0.97]}, "left_arm": {"rotation": [-0.5, 0, 0.5, 0.71]}, "right_arm": {"rotation": [-0.5, 0, -0.5, 0.71]}}},
                {"time": 0.35, "bones": {"chest": {"rotation": [0.1, 0.2, 0, 0.97]}, "left_arm": {"rotation": [0.4, 0, 0.2, 0.89]}, "right_arm": {"rotation": [0.4, 0, -0.2, 0.89]}}},
                {"time": 0.7, "bones": {"chest": {"rotation": [0, 0, 0, 1]}, "left_arm": {"rotation": [0, 0, 0.18, 0.98]}, "right_arm": {"rotation": [0, 0, -0.18, 0.98]}}}
            ]
        },
        "ability_shadow_step": {
            "name": "Shadow Step",
            "duration": 0.6,
            "loop": false,
            "events": [{"time": 0.2, "event": "teleport"}, {"time": 0.2, "event": "spawn_effect", "data": {"effect": "shadow_vanish"}}],
            "keyframes": [
                {"time": 0.0, "bones": {"root": {"scale": [1, 1, 1]}}},
                {"time": 0.2, "bones": {"root": {"scale": [0.1, 0.1, 0.1]}}},
                {"time": 0.4, "bones": {"root": {"scale": [0.1, 0.1, 0.1]}}},
                {"time": 0.6, "bones": {"root": {"scale": [1, 1, 1]}}}
            ]
        },
        "death": {
            "name": "Shadow Dissolution",
            "duration": 1.8,
            "loop": false,
            "keyframes": [
                {"time": 0.0, "bones": {"root": {"position": [0, 0, 0], "scale": [1, 1, 1]}}},
                {"time": 0.6, "bones": {"root": {"position": [0, -0.2, 0], "scale": [1.2, 0.8, 1.2]}}},
                {"time": 1.8, "bones": {"root": {"position": [0, -0.5, 0], "scale": [0, 0, 0]}}}
            ]
        }
    },

    "animation_state_machine": {
        "states": [
            {"name": "idle", "animation": "idle", "default": true},
            {"name": "glide", "animation": "glide"},
            {"name": "attack", "animation": "attack"},
            {"name": "shadow_step", "animation": "ability_shadow_step"},
            {"name": "death", "animation": "death"}
        ],
        "transitions": [
            {"from": "idle", "to": "glide", "condition": "speed > 0.1", "blend_time": 0.15},
            {"from": "glide", "to": "idle", "condition": "speed < 0.1", "blend_time": 0.15},
            {"from": "any", "to": "attack", "condition": "trigger_attack", "blend_time": 0.1},
            {"from": "attack", "to": "idle", "condition": "animation_complete", "blend_time": 0.2},
            {"from": "any", "to": "shadow_step", "condition": "trigger_ability_q", "blend_time": 0.05},
            {"from": "shadow_step", "to": "idle", "condition": "animation_complete", "blend_time": 0.1},
            {"from": "any", "to": "death", "condition": "health <= 0", "blend_time": 0.1}
        ]
    },

    "behavior": {
        "ai_type": "hero_assassin",
        "scripts": {
            "on_spawn": {
                "actions": [
                    {"type": "play_animation", "animation": "idle"},
                    {"type": "spawn_effect", "effect": "shadow_coalesce"},
                    {"type": "play_sound", "sound": "shadow_lord_ready"}
                ]
            },
            "on_attack": {
                "actions": [
                    {"type": "play_animation", "animation": "attack"},
                    {"type": "deal_damage", "delay": 0.35},
                    {"type": "apply_debuff", "debuff": "shadow_mark", "duration": 5}
                ]
            },
            "on_ability_q": {
                "actions": [
                    {"type": "play_animation", "animation": "ability_shadow_step"},
                    {"type": "teleport_to_target", "range": 800},
                    {"type": "deal_bonus_damage", "multiplier": 2.0},
                    {"type": "start_cooldown", "ability": "shadow_step"}
                ]
            },
            "on_death": {
                "actions": [
                    {"type": "play_animation", "animation": "death"},
                    {"type": "spawn_effect", "effect": "shadow_disperse"},
                    {"type": "play_sound", "sound": "shadow_lord_death"}
                ]
            }
        },

        "passive_aura": {
            "name": "Cloak of Shadows",
            "radius": 8.0,
            "effects": [
                {"type": "stealth_bonus", "value": 0.3, "target": "self", "condition": "not_attacking"},
                {"type": "move_speed_bonus", "value": 0.2, "target": "self", "condition": "night_time"}
            ]
        }
    }
}
