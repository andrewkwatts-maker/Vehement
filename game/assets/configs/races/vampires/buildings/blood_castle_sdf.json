{
  "id": "blood_castle",
  "name": "Blood Castle",
  "race": "vampires",
  "type": "building",
  "category": "main_hall",
  "description": "An imposing vampire fortress. Unlocks advanced units and technologies.",

  "sdfModel": {
    "name": "blood_castle_model",
    "bounds": { "min": [-7.5, 0.0, -7.5], "max": [7.5, 14.0, 7.5] },
    "primitives": [
      {
        "id": "foundation",
        "type": "RoundedBox",
        "params": { "size": [14.0, 2.0, 14.0], "radius": 0.2 },
        "transform": { "position": [0.0, 1.0, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.1, 0.06, 0.06, 1.0], "metallic": 0.15, "roughness": 0.85 },
        "operation": "Union"
      },
      {
        "id": "base_wall",
        "type": "RoundedBox",
        "params": { "size": [12.5, 5.5, 12.5], "radius": 0.25 },
        "transform": { "position": [0.0, 4.75, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.14, 0.09, 0.09, 1.0], "metallic": 0.08, "roughness": 0.82 },
        "operation": "Union"
      },
      {
        "id": "upper_wall",
        "type": "RoundedBox",
        "params": { "size": [11.0, 3.0, 11.0], "radius": 0.2 },
        "transform": { "position": [0.0, 9.0, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.16, 0.1, 0.1, 1.0], "metallic": 0.1, "roughness": 0.8 },
        "operation": "Union"
      },
      {
        "id": "central_tower",
        "type": "Cylinder",
        "params": { "radius": 3.0, "height": 10.0 },
        "transform": { "position": [0.0, 10.0, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.18, 0.11, 0.11, 1.0], "metallic": 0.12, "roughness": 0.78 },
        "operation": "Union"
      },
      {
        "id": "tower_crown",
        "type": "Cone",
        "params": { "radius1": 3.2, "radius2": 2.5, "height": 2.0 },
        "transform": { "position": [0.0, 15.5, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.2, 0.12, 0.12, 1.0], "metallic": 0.15, "roughness": 0.75 },
        "operation": "SmoothUnion",
        "smoothness": 0.15
      },
      {
        "id": "tower_battlements",
        "type": "Cylinder",
        "params": { "radius": 2.5, "height": 1.5 },
        "transform": { "position": [0.0, 16.75, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.2, 0.12, 0.12, 1.0], "metallic": 0.15, "roughness": 0.75 },
        "operation": "Union"
      },
      {
        "id": "main_spire",
        "type": "Cone",
        "params": { "radius1": 0.2, "radius2": 2.7, "height": 4.5 },
        "transform": { "position": [0.0, 19.75, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.08, 0.03, 0.03, 1.0], "metallic": 0.4, "roughness": 0.5 },
        "operation": "Union"
      },
      {
        "id": "corner_tower_fl",
        "type": "Cylinder",
        "params": { "radius": 1.8, "height": 7.0 },
        "transform": { "position": [-5.0, 6.5, -5.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.15, 0.1, 0.1, 1.0], "metallic": 0.1, "roughness": 0.8 },
        "operation": "Union"
      },
      {
        "id": "tower_top_fl",
        "type": "Cone",
        "params": { "radius1": 0.12, "radius2": 2.0, "height": 2.5 },
        "transform": { "position": [-5.0, 11.25, -5.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.08, 0.03, 0.03, 1.0], "metallic": 0.4, "roughness": 0.5 },
        "operation": "Union"
      },
      {
        "id": "corner_tower_fr",
        "type": "Cylinder",
        "params": { "radius": 1.8, "height": 7.0 },
        "transform": { "position": [5.0, 6.5, -5.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.15, 0.1, 0.1, 1.0], "metallic": 0.1, "roughness": 0.8 },
        "operation": "Union"
      },
      {
        "id": "tower_top_fr",
        "type": "Cone",
        "params": { "radius1": 0.12, "radius2": 2.0, "height": 2.5 },
        "transform": { "position": [5.0, 11.25, -5.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.08, 0.03, 0.03, 1.0], "metallic": 0.4, "roughness": 0.5 },
        "operation": "Union"
      },
      {
        "id": "corner_tower_bl",
        "type": "Cylinder",
        "params": { "radius": 1.8, "height": 7.0 },
        "transform": { "position": [-5.0, 6.5, 5.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.15, 0.1, 0.1, 1.0], "metallic": 0.1, "roughness": 0.8 },
        "operation": "Union"
      },
      {
        "id": "tower_top_bl",
        "type": "Cone",
        "params": { "radius1": 0.12, "radius2": 2.0, "height": 2.5 },
        "transform": { "position": [-5.0, 11.25, 5.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.08, 0.03, 0.03, 1.0], "metallic": 0.4, "roughness": 0.5 },
        "operation": "Union"
      },
      {
        "id": "corner_tower_br",
        "type": "Cylinder",
        "params": { "radius": 1.8, "height": 7.0 },
        "transform": { "position": [5.0, 6.5, 5.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.15, 0.1, 0.1, 1.0], "metallic": 0.1, "roughness": 0.8 },
        "operation": "Union"
      },
      {
        "id": "tower_top_br",
        "type": "Cone",
        "params": { "radius1": 0.12, "radius2": 2.0, "height": 2.5 },
        "transform": { "position": [5.0, 11.25, 5.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.08, 0.03, 0.03, 1.0], "metallic": 0.4, "roughness": 0.5 },
        "operation": "Union"
      },
      {
        "id": "entrance_frame",
        "type": "RoundedBox",
        "params": { "size": [4.0, 4.5, 1.0], "radius": 0.2 },
        "transform": { "position": [0.0, 3.25, 6.25], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.09, 0.05, 0.05, 1.0], "metallic": 0.25, "roughness": 0.7 },
        "operation": "Union"
      },
      {
        "id": "entrance_opening",
        "type": "RoundedBox",
        "params": { "size": [3.0, 4.0, 1.2], "radius": 0.25 },
        "transform": { "position": [0.0, 3.0, 6.25], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.0, 0.0, 0.0, 1.0], "metallic": 0.0, "roughness": 1.0 },
        "operation": "Subtraction"
      },
      {
        "id": "blood_orb_center",
        "type": "Sphere",
        "params": { "radius": 0.5 },
        "transform": { "position": [0.0, 17.5, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.3, 1.0] },
        "material": { "baseColor": [0.85, 0.08, 0.03, 0.9], "metallic": 0.75, "roughness": 0.12, "emissive": [0.7, 0.08, 0.03] },
        "operation": "Union"
      },
      {
        "id": "blood_orb_fl",
        "type": "Sphere",
        "params": { "radius": 0.25 },
        "transform": { "position": [-5.0, 12.5, -5.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.2, 1.0] },
        "material": { "baseColor": [0.8, 0.06, 0.02, 0.88], "metallic": 0.7, "roughness": 0.15, "emissive": [0.6, 0.06, 0.02] },
        "operation": "Union"
      },
      {
        "id": "blood_orb_fr",
        "type": "Sphere",
        "params": { "radius": 0.25 },
        "transform": { "position": [5.0, 12.5, -5.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.2, 1.0] },
        "material": { "baseColor": [0.8, 0.06, 0.02, 0.88], "metallic": 0.7, "roughness": 0.15, "emissive": [0.6, 0.06, 0.02] },
        "operation": "Union"
      },
      {
        "id": "blood_orb_bl",
        "type": "Sphere",
        "params": { "radius": 0.25 },
        "transform": { "position": [-5.0, 12.5, 5.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.2, 1.0] },
        "material": { "baseColor": [0.8, 0.06, 0.02, 0.88], "metallic": 0.7, "roughness": 0.15, "emissive": [0.6, 0.06, 0.02] },
        "operation": "Union"
      },
      {
        "id": "blood_orb_br",
        "type": "Sphere",
        "params": { "radius": 0.25 },
        "transform": { "position": [5.0, 12.5, 5.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.2, 1.0] },
        "material": { "baseColor": [0.8, 0.06, 0.02, 0.88], "metallic": 0.7, "roughness": 0.15, "emissive": [0.6, 0.06, 0.02] },
        "operation": "Union"
      },
      {
        "id": "window_1",
        "type": "RoundedBox",
        "params": { "size": [0.8, 1.5, 0.2], "radius": 0.08 },
        "transform": { "position": [0.0, 12.0, 2.95], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.75, 0.06, 0.02, 1.0], "metallic": 0.25, "roughness": 0.3, "emissive": [0.5, 0.05, 0.02] },
        "operation": "Union"
      },
      {
        "id": "window_2",
        "type": "RoundedBox",
        "params": { "size": [0.8, 1.5, 0.2], "radius": 0.08 },
        "transform": { "position": [0.0, 12.0, -2.95], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.75, 0.06, 0.02, 1.0], "metallic": 0.25, "roughness": 0.3, "emissive": [0.5, 0.05, 0.02] },
        "operation": "Union"
      },
      {
        "id": "window_3",
        "type": "RoundedBox",
        "params": { "size": [0.2, 1.5, 0.8], "radius": 0.08 },
        "transform": { "position": [2.95, 12.0, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.75, 0.06, 0.02, 1.0], "metallic": 0.25, "roughness": 0.3, "emissive": [0.5, 0.05, 0.02] },
        "operation": "Union"
      },
      {
        "id": "window_4",
        "type": "RoundedBox",
        "params": { "size": [0.2, 1.5, 0.8], "radius": 0.08 },
        "transform": { "position": [-2.95, 12.0, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.75, 0.06, 0.02, 1.0], "metallic": 0.25, "roughness": 0.3, "emissive": [0.5, 0.05, 0.02] },
        "operation": "Union"
      },
      {
        "id": "iron_band_1",
        "type": "Torus",
        "params": { "majorRadius": 3.1, "minorRadius": 0.1 },
        "transform": { "position": [0.0, 8.0, 0.0], "rotation": [1.57, 0.0, 0.0, 0.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.22, 0.2, 0.2, 1.0], "metallic": 0.85, "roughness": 0.35 },
        "operation": "Union"
      },
      {
        "id": "iron_band_2",
        "type": "Torus",
        "params": { "majorRadius": 3.1, "minorRadius": 0.1 },
        "transform": { "position": [0.0, 14.0, 0.0], "rotation": [1.57, 0.0, 0.0, 0.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.22, 0.2, 0.2, 1.0], "metallic": 0.85, "roughness": 0.35 },
        "operation": "Union"
      },
      {
        "id": "battlement_1",
        "type": "RoundedBox",
        "params": { "size": [1.5, 1.0, 0.5], "radius": 0.05 },
        "transform": { "position": [1.25, 10.75, 5.3], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.14, 0.09, 0.09, 1.0], "metallic": 0.1, "roughness": 0.8 },
        "operation": "Union"
      },
      {
        "id": "battlement_2",
        "type": "RoundedBox",
        "params": { "size": [1.5, 1.0, 0.5], "radius": 0.05 },
        "transform": { "position": [-1.25, 10.75, 5.3], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.14, 0.09, 0.09, 1.0], "metallic": 0.1, "roughness": 0.8 },
        "operation": "Union"
      }
    ]
  },

  "skeleton": {
    "bones": [
      { "name": "root", "parent": null, "position": [0.0, 0.0, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0] },
      { "name": "central_tower", "parent": "root", "position": [0.0, 10.0, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0] },
      { "name": "main_spire", "parent": "central_tower", "position": [0.0, 9.75, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0] }
    ]
  },

  "animations": {
    "idle": {
      "duration": 5.0, "loop": true,
      "keyframes": [
        { "time": 0.0, "bones": { "main_spire": { "rotation": [0.0, 0.0, 0.0, 1.0] } } },
        { "time": 2.5, "bones": { "main_spire": { "rotation": [0.0, 0.15, 0.0, 0.99] } } },
        { "time": 5.0, "bones": { "main_spire": { "rotation": [0.0, 0.0, 0.0, 1.0] } } }
      ]
    },
    "construction": {
      "duration": 90.0, "loop": false,
      "keyframes": [
        { "time": 0.0, "bones": { "root": { "position": [0.0, -10.0, 0.0], "scale": [1.0, 0.1, 1.0] } } },
        { "time": 22.5, "bones": { "root": { "position": [0.0, -5.0, 0.0], "scale": [1.0, 0.4, 1.0] } } },
        { "time": 45.0, "bones": { "root": { "position": [0.0, -2.5, 0.0], "scale": [1.0, 0.7, 1.0] } } },
        { "time": 67.5, "bones": { "root": { "position": [0.0, -0.8, 0.0], "scale": [1.0, 0.9, 1.0] } } },
        { "time": 90.0, "bones": { "root": { "position": [0.0, 0.0, 0.0], "scale": [1.0, 1.0, 1.0] } } }
      ]
    },
    "destruction": {
      "duration": 4.0, "loop": false,
      "keyframes": [
        { "time": 0.0, "bones": { "root": { "position": [0.0, 0.0, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0] } } },
        { "time": 1.2, "bones": { "root": { "position": [0.0, -0.8, 0.0], "rotation": [0.06, 0.0, 0.06, 0.996] } }, "events": ["debris_fall"] },
        { "time": 2.5, "bones": { "root": { "position": [0.0, -2.5, 0.0], "rotation": [0.12, 0.0, 0.1, 0.99] } }, "events": ["major_collapse"] },
        { "time": 4.0, "bones": { "root": { "position": [0.0, -6.0, 0.0], "rotation": [0.25, 0.08, 0.18, 0.94] } } }
      ]
    }
  },

  "animationStateMachine": {
    "initialState": "idle",
    "states": {
      "idle": { "animation": "idle", "transitions": [{ "to": "construction", "condition": "isConstructing" }, { "to": "destruction", "condition": "isDestroyed" }] },
      "construction": { "animation": "construction", "transitions": [{ "to": "idle", "condition": "animationComplete" }] },
      "destruction": { "animation": "destruction", "transitions": [] }
    }
  },

  "behaviors": {
    "on_construct_start": { "actions": [{ "type": "play_animation", "animation": "construction" }, { "type": "spawn_effect", "effect": "blood_castle_construction" }, { "type": "play_sound", "sound": "blood_castle_build" }] },
    "on_construct_complete": { "actions": [{ "type": "play_animation", "animation": "idle" }, { "type": "play_sound", "sound": "blood_castle_ready" }, { "type": "spawn_effect", "effect": "castle_completion_aura" }] },
    "on_destruction": { "actions": [{ "type": "play_animation", "animation": "destruction" }, { "type": "spawn_effect", "effect": "castle_collapse_blood" }, { "type": "play_sound", "sound": "castle_destruction" }] }
  }
}
