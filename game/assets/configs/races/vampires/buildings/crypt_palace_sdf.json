{
  "id": "crypt_palace",
  "name": "Crypt Palace",
  "race": "vampires",
  "type": "building",
  "category": "main_hall",
  "description": "The primary stronghold of the Blood Court. Produces thralls and advances through the ages.",

  "sdfModel": {
    "name": "crypt_palace_model",
    "bounds": { "min": [-6.0, 0.0, -6.0], "max": [6.0, 10.0, 6.0] },
    "primitives": [
      {
        "id": "foundation",
        "type": "RoundedBox",
        "params": { "size": [11.0, 1.5, 11.0], "radius": 0.15 },
        "transform": { "position": [0.0, 0.75, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.12, 0.08, 0.08, 1.0], "metallic": 0.1, "roughness": 0.9 },
        "operation": "Union"
      },
      {
        "id": "base_wall",
        "type": "RoundedBox",
        "params": { "size": [10.0, 4.0, 10.0], "radius": 0.2 },
        "transform": { "position": [0.0, 3.5, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.15, 0.1, 0.1, 1.0], "metallic": 0.05, "roughness": 0.85 },
        "operation": "Union"
      },
      {
        "id": "main_tower",
        "type": "Cylinder",
        "params": { "radius": 2.5, "height": 8.0 },
        "transform": { "position": [0.0, 7.5, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.18, 0.12, 0.12, 1.0], "metallic": 0.1, "roughness": 0.8 },
        "operation": "Union"
      },
      {
        "id": "tower_taper",
        "type": "Cone",
        "params": { "radius1": 2.5, "radius2": 2.0, "height": 1.5 },
        "transform": { "position": [0.0, 11.75, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.18, 0.12, 0.12, 1.0], "metallic": 0.1, "roughness": 0.8 },
        "operation": "SmoothUnion",
        "smoothness": 0.1
      },
      {
        "id": "tower_top",
        "type": "Cylinder",
        "params": { "radius": 2.0, "height": 2.0 },
        "transform": { "position": [0.0, 13.5, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.2, 0.13, 0.13, 1.0], "metallic": 0.1, "roughness": 0.8 },
        "operation": "Union"
      },
      {
        "id": "spire",
        "type": "Cone",
        "params": { "radius1": 0.15, "radius2": 2.2, "height": 3.5 },
        "transform": { "position": [0.0, 16.25, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.08, 0.04, 0.04, 1.0], "metallic": 0.3, "roughness": 0.6 },
        "operation": "Union"
      },
      {
        "id": "corner_turret_fl",
        "type": "Cylinder",
        "params": { "radius": 1.2, "height": 5.0 },
        "transform": { "position": [-4.0, 5.0, -4.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.16, 0.11, 0.11, 1.0], "metallic": 0.08, "roughness": 0.82 },
        "operation": "Union"
      },
      {
        "id": "turret_roof_fl",
        "type": "Cone",
        "params": { "radius1": 0.1, "radius2": 1.4, "height": 2.0 },
        "transform": { "position": [-4.0, 8.5, -4.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.08, 0.04, 0.04, 1.0], "metallic": 0.3, "roughness": 0.6 },
        "operation": "Union"
      },
      {
        "id": "corner_turret_fr",
        "type": "Cylinder",
        "params": { "radius": 1.2, "height": 5.0 },
        "transform": { "position": [4.0, 5.0, -4.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.16, 0.11, 0.11, 1.0], "metallic": 0.08, "roughness": 0.82 },
        "operation": "Union"
      },
      {
        "id": "turret_roof_fr",
        "type": "Cone",
        "params": { "radius1": 0.1, "radius2": 1.4, "height": 2.0 },
        "transform": { "position": [4.0, 8.5, -4.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.08, 0.04, 0.04, 1.0], "metallic": 0.3, "roughness": 0.6 },
        "operation": "Union"
      },
      {
        "id": "corner_turret_bl",
        "type": "Cylinder",
        "params": { "radius": 1.2, "height": 5.0 },
        "transform": { "position": [-4.0, 5.0, 4.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.16, 0.11, 0.11, 1.0], "metallic": 0.08, "roughness": 0.82 },
        "operation": "Union"
      },
      {
        "id": "turret_roof_bl",
        "type": "Cone",
        "params": { "radius1": 0.1, "radius2": 1.4, "height": 2.0 },
        "transform": { "position": [-4.0, 8.5, 4.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.08, 0.04, 0.04, 1.0], "metallic": 0.3, "roughness": 0.6 },
        "operation": "Union"
      },
      {
        "id": "corner_turret_br",
        "type": "Cylinder",
        "params": { "radius": 1.2, "height": 5.0 },
        "transform": { "position": [4.0, 5.0, 4.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.16, 0.11, 0.11, 1.0], "metallic": 0.08, "roughness": 0.82 },
        "operation": "Union"
      },
      {
        "id": "turret_roof_br",
        "type": "Cone",
        "params": { "radius1": 0.1, "radius2": 1.4, "height": 2.0 },
        "transform": { "position": [4.0, 8.5, 4.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.08, 0.04, 0.04, 1.0], "metallic": 0.3, "roughness": 0.6 },
        "operation": "Union"
      },
      {
        "id": "entrance_arch",
        "type": "RoundedBox",
        "params": { "size": [3.0, 3.5, 0.8], "radius": 0.15 },
        "transform": { "position": [0.0, 2.75, 5.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.1, 0.06, 0.06, 1.0], "metallic": 0.2, "roughness": 0.75 },
        "operation": "Union"
      },
      {
        "id": "entrance_opening",
        "type": "RoundedBox",
        "params": { "size": [2.2, 3.0, 1.0], "radius": 0.2 },
        "transform": { "position": [0.0, 2.5, 5.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.0, 0.0, 0.0, 1.0], "metallic": 0.0, "roughness": 1.0 },
        "operation": "Subtraction"
      },
      {
        "id": "blood_crystal_1",
        "type": "Sphere",
        "params": { "radius": 0.35 },
        "transform": { "position": [0.0, 14.5, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.5, 1.0] },
        "material": { "baseColor": [0.8, 0.05, 0.02, 0.85], "metallic": 0.7, "roughness": 0.15, "emissive": [0.6, 0.05, 0.02] },
        "operation": "Union"
      },
      {
        "id": "window_glow_1",
        "type": "RoundedBox",
        "params": { "size": [0.6, 1.2, 0.15], "radius": 0.05 },
        "transform": { "position": [0.0, 9.5, 2.45], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.7, 0.05, 0.02, 1.0], "metallic": 0.2, "roughness": 0.3, "emissive": [0.4, 0.03, 0.01] },
        "operation": "Union"
      },
      {
        "id": "window_glow_2",
        "type": "RoundedBox",
        "params": { "size": [0.6, 1.2, 0.15], "radius": 0.05 },
        "transform": { "position": [0.0, 9.5, -2.45], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.7, 0.05, 0.02, 1.0], "metallic": 0.2, "roughness": 0.3, "emissive": [0.4, 0.03, 0.01] },
        "operation": "Union"
      },
      {
        "id": "window_glow_3",
        "type": "RoundedBox",
        "params": { "size": [0.15, 1.2, 0.6], "radius": 0.05 },
        "transform": { "position": [2.45, 9.5, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.7, 0.05, 0.02, 1.0], "metallic": 0.2, "roughness": 0.3, "emissive": [0.4, 0.03, 0.01] },
        "operation": "Union"
      },
      {
        "id": "window_glow_4",
        "type": "RoundedBox",
        "params": { "size": [0.15, 1.2, 0.6], "radius": 0.05 },
        "transform": { "position": [-2.45, 9.5, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.7, 0.05, 0.02, 1.0], "metallic": 0.2, "roughness": 0.3, "emissive": [0.4, 0.03, 0.01] },
        "operation": "Union"
      },
      {
        "id": "iron_band_lower",
        "type": "Torus",
        "params": { "majorRadius": 2.6, "minorRadius": 0.08 },
        "transform": { "position": [0.0, 6.0, 0.0], "rotation": [1.57, 0.0, 0.0, 0.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.2, 0.18, 0.18, 1.0], "metallic": 0.8, "roughness": 0.4 },
        "operation": "Union"
      },
      {
        "id": "iron_band_upper",
        "type": "Torus",
        "params": { "majorRadius": 2.1, "minorRadius": 0.08 },
        "transform": { "position": [0.0, 12.5, 0.0], "rotation": [1.57, 0.0, 0.0, 0.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.2, 0.18, 0.18, 1.0], "metallic": 0.8, "roughness": 0.4 },
        "operation": "Union"
      },
      {
        "id": "gothic_detail_1",
        "type": "RoundedBox",
        "params": { "size": [0.25, 1.5, 0.2], "radius": 0.05 },
        "transform": { "position": [1.5, 5.0, 5.2], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.12, 0.08, 0.08, 1.0], "metallic": 0.3, "roughness": 0.7 },
        "operation": "Union"
      },
      {
        "id": "gothic_detail_2",
        "type": "RoundedBox",
        "params": { "size": [0.25, 1.5, 0.2], "radius": 0.05 },
        "transform": { "position": [-1.5, 5.0, 5.2], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.12, 0.08, 0.08, 1.0], "metallic": 0.3, "roughness": 0.7 },
        "operation": "Union"
      }
    ]
  },

  "skeleton": {
    "bones": [
      { "name": "root", "parent": null, "position": [0.0, 0.0, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0] },
      { "name": "main_tower", "parent": "root", "position": [0.0, 7.5, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0] },
      { "name": "spire", "parent": "main_tower", "position": [0.0, 8.75, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0] }
    ]
  },

  "animations": {
    "idle": {
      "duration": 4.0, "loop": true,
      "keyframes": [
        { "time": 0.0, "bones": { "spire": { "rotation": [0.0, 0.0, 0.0, 1.0] } } },
        { "time": 2.0, "bones": { "spire": { "rotation": [0.0, 0.1, 0.0, 0.995] } } },
        { "time": 4.0, "bones": { "spire": { "rotation": [0.0, 0.0, 0.0, 1.0] } } }
      ]
    },
    "construction": {
      "duration": 120.0, "loop": false,
      "keyframes": [
        { "time": 0.0, "bones": { "root": { "position": [0.0, -8.0, 0.0], "scale": [1.0, 0.1, 1.0] } } },
        { "time": 30.0, "bones": { "root": { "position": [0.0, -4.0, 0.0], "scale": [1.0, 0.4, 1.0] } } },
        { "time": 60.0, "bones": { "root": { "position": [0.0, -2.0, 0.0], "scale": [1.0, 0.7, 1.0] } } },
        { "time": 90.0, "bones": { "root": { "position": [0.0, -0.5, 0.0], "scale": [1.0, 0.9, 1.0] } } },
        { "time": 120.0, "bones": { "root": { "position": [0.0, 0.0, 0.0], "scale": [1.0, 1.0, 1.0] } } }
      ]
    },
    "destruction": {
      "duration": 3.5, "loop": false,
      "keyframes": [
        { "time": 0.0, "bones": { "root": { "position": [0.0, 0.0, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0] } } },
        { "time": 1.0, "bones": { "root": { "position": [0.0, -0.5, 0.0], "rotation": [0.05, 0.0, 0.05, 0.997] } }, "events": ["debris_fall"] },
        { "time": 2.0, "bones": { "root": { "position": [0.0, -2.0, 0.0], "rotation": [0.1, 0.0, 0.08, 0.99] } }, "events": ["large_collapse"] },
        { "time": 3.5, "bones": { "root": { "position": [0.0, -5.0, 0.0], "rotation": [0.2, 0.05, 0.15, 0.96] } } }
      ]
    }
  },

  "animationStateMachine": {
    "initialState": "idle",
    "states": {
      "idle": { "animation": "idle", "transitions": [{ "to": "construction", "condition": "isConstructing" }, { "to": "destruction", "condition": "isDestroyed" }] },
      "construction": { "animation": "construction", "transitions": [{ "to": "idle", "condition": "animationComplete" }] },
      "destruction": { "animation": "destruction", "transitions": [] }
    }
  },

  "behaviors": {
    "on_construct_start": { "actions": [{ "type": "play_animation", "animation": "construction" }, { "type": "spawn_effect", "effect": "dark_construction_mist" }, { "type": "play_sound", "sound": "crypt_palace_build" }] },
    "on_construct_complete": { "actions": [{ "type": "play_animation", "animation": "idle" }, { "type": "play_sound", "sound": "crypt_palace_ready" }] },
    "on_destruction": { "actions": [{ "type": "play_animation", "animation": "destruction" }, { "type": "spawn_effect", "effect": "building_collapse_blood" }, { "type": "play_sound", "sound": "building_destruction" }] }
  }
}
