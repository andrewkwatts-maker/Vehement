{
  "id": "blood_castle",
  "type": "building",
  "race": "vampires",
  "name": "Blood Castle",
  "description": "An imposing vampire fortress. Unlocks advanced units and technologies. Upgrades to Citadel of Night.",

  "tags": ["main_hall", "production", "age_advancement"],
  "tier": 2,
  "age_requirement": 2,

  "model": {
    "path": "models/races/vampires/buildings/blood_castle.obj",
    "scale": [1.0, 1.0, 1.0]
  },

  "textures": {
    "diffuse": "textures/races/vampires/buildings/blood_castle_diffuse.png",
    "normal": "textures/races/vampires/buildings/blood_castle_normal.png",
    "emissive": "textures/races/vampires/buildings/blood_castle_emissive.png"
  },

  "footprint": {
    "size": [5, 5],
    "entrances": [[2, 0]],
    "visualSize": [15.0, 14.0, 15.0]
  },

  "construction": {
    "cost": {
      "gold": 400,
      "lumber": 200,
      "blood": 50
    },
    "time": 90.0,
    "upgradeFrom": "crypt_palace"
  },

  "stats": {
    "maxHealth": 3500,
    "armor": 20,
    "magicResist": 15
  },

  "production": [
    {
      "type": "unit",
      "output": "thrall",
      "cost": {"gold": 75, "food": 1},
      "time": 13.0,
      "maxQueue": 10
    }
  ],

  "researches": [
    {
      "id": "advanced_gathering",
      "name": "Advanced Gathering",
      "description": "Thralls gather resources 40% faster (stacks with Improved)",
      "cost": {"gold": 200, "lumber": 100},
      "time": 60.0,
      "prerequisites": ["improved_gathering"]
    },
    {
      "id": "blood_efficiency",
      "name": "Blood Efficiency",
      "description": "Blood costs reduced by 15%",
      "cost": {"gold": 250, "blood": 75},
      "time": 75.0
    }
  ],

  "upgradePath": {
    "upgradeTo": "citadel_of_night",
    "cost": {"gold": 600, "lumber": 300, "blood": 100},
    "time": 120.0,
    "prerequisites": ["age_count"]
  },

  "ageAdvancement": {
    "canAdvanceAge": true,
    "availableAges": ["noble", "count", "duke"]
  },

  "abilities": [
    {
      "id": "blood_collection_improved",
      "name": "Blood Collection",
      "type": "passive",
      "description": "Generates 2 Blood per 10 seconds",
      "effects": {
        "bloodGeneration": 0.2
      }
    },
    {
      "id": "night_shroud",
      "name": "Night Shroud",
      "type": "active",
      "targetType": "area",
      "description": "Create artificial night in an area for 60 seconds",
      "cooldown": 300,
      "effects": {
        "radius": 800,
        "duration": 60,
        "grantsNightBonuses": true
      }
    }
  ],

  "garrison": {
    "capacity": 12,
    "heals_garrisoned": true,
    "heal_rate": 8.0,
    "attack_from_garrison": true,
    "garrisonAttack": {
      "damage": 15,
      "range": 700,
      "attackSpeed": 1.0
    }
  },

  "visionRange": 14.0,

  "requirements": {
    "buildings": ["crypt_palace"],
    "upgradeFrom": "crypt_palace"
  },

  "unique": true,
  "maxCount": 1,

  "ui": {
    "portrait": "textures/races/vampires/portraits/buildings/blood_castle.png",
    "icon": "textures/races/vampires/icons/buildings/blood_castle.png",
    "hotkey": "C"
  },

  "dayNightEffects": {
    "night": {
      "healthRegenBonus": 10.0,
      "productionSpeedBonus": 0.25
    }
  }
}
