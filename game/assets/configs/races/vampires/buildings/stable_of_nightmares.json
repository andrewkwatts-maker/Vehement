{
  "id": "stable_of_nightmares",
  "type": "building",
  "race": "vampires",
  "name": "Stable of Nightmares",
  "description": "Dark stables where Nightmare steeds and mounted vampire units are bred and trained.",

  "tags": ["military", "production", "cavalry"],
  "tier": 2,
  "age_requirement": 2,

  "model": {
    "path": "models/races/vampires/buildings/stable_of_nightmares.obj",
    "scale": [1.0, 1.0, 1.0]
  },

  "textures": {
    "diffuse": "textures/races/vampires/buildings/stable_diffuse.png",
    "normal": "textures/races/vampires/buildings/stable_normal.png"
  },

  "footprint": {
    "size": [4, 3],
    "entrances": [[2, 0]],
    "visualSize": [10.0, 6.0, 8.0]
  },

  "construction": {
    "cost": {
      "gold": 250,
      "lumber": 120,
      "blood": 25
    },
    "time": 55.0
  },

  "stats": {
    "maxHealth": 1300,
    "armor": 10,
    "magicResist": 5
  },

  "production": [
    {
      "type": "unit",
      "output": "vampire_knight",
      "cost": {"gold": 280, "lumber": 60, "blood": 20, "food": 4},
      "time": 35.0,
      "maxQueue": 4,
      "prerequisites": ["blood_castle"]
    },
    {
      "type": "unit",
      "output": "nightmare",
      "cost": {"gold": 320, "lumber": 50, "blood": 40, "food": 4},
      "time": 45.0,
      "maxQueue": 3,
      "prerequisites": ["citadel_of_night"]
    }
  ],

  "researches": [
    {
      "id": "nightmare_breeding",
      "name": "Nightmare Breeding",
      "description": "Mounted units gain +10% speed",
      "cost": {"gold": 175, "lumber": 75},
      "time": 50.0
    },
    {
      "id": "improved_charge",
      "name": "Improved Charge",
      "description": "Mounted Charge deals 50% more damage",
      "cost": {"gold": 200, "lumber": 100, "blood": 50},
      "time": 60.0,
      "prerequisites": ["blood_castle"]
    },
    {
      "id": "extended_transform",
      "name": "Extended Transform",
      "description": "Vampire Knight transform duration increased by 50%",
      "cost": {"gold": 175, "blood": 75},
      "time": 55.0
    },
    {
      "id": "ethereal_fortitude",
      "name": "Ethereal Fortitude",
      "description": "Nightmares take less magic damage in ethereal form",
      "cost": {"gold": 225, "blood": 100},
      "time": 65.0,
      "prerequisites": ["citadel_of_night"]
    }
  ],

  "visionRange": 10.0,

  "requirements": {
    "buildings": ["blood_castle"]
  },

  "unique": false,
  "maxCount": 2,

  "ui": {
    "portrait": "textures/races/vampires/portraits/buildings/stable_of_nightmares.png",
    "icon": "textures/races/vampires/icons/buildings/stable_of_nightmares.png",
    "hotkey": "M"
  }
}
