/* Responsive UI Styles */

/* ===== Viewport Size Utilities ===== */

:root {
    /* Breakpoints as CSS custom properties */
    --breakpoint-xs: 480px;
    --breakpoint-sm: 640px;
    --breakpoint-md: 768px;
    --breakpoint-lg: 1024px;
    --breakpoint-xl: 1280px;
    --breakpoint-xxl: 1536px;

    /* Dynamic spacing based on viewport */
    --spacing-responsive: clamp(8px, 2vw, 24px);
    --font-size-responsive: clamp(12px, 1.5vw, 16px);
}

/* ===== Base Responsive Adjustments ===== */

/* Mobile First Base */
html {
    font-size: 14px;
}

/* Scale typography with viewport */
@media screen and (min-width: 768px) {
    html {
        font-size: 15px;
    }
}

@media screen and (min-width: 1024px) {
    html {
        font-size: 16px;
    }
}

/* ===== Panel Responsive Styles ===== */

.panel {
    max-width: 100vw;
    max-height: 100vh;
}

/* Full screen panels on mobile */
@media screen and (max-width: 640px) {
    .panel {
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        width: 100% !important;
        height: 100% !important;
        border-radius: 0 !important;
        margin: 0 !important;
    }

    .panel-header {
        padding: var(--spacing-md);
    }

    .panel-content {
        padding: var(--spacing-sm);
    }
}

/* ===== Inventory Responsive ===== */

.inventory-panel {
    flex-direction: column;
}

@media screen and (min-width: 768px) {
    .inventory-panel {
        flex-direction: row;
    }
}

/* Inventory grid columns based on screen size */
.inventory-grid {
    grid-template-columns: repeat(4, 1fr);
}

@media screen and (min-width: 480px) {
    .inventory-grid {
        grid-template-columns: repeat(5, 1fr);
    }
}

@media screen and (min-width: 640px) {
    .inventory-grid {
        grid-template-columns: repeat(6, 1fr);
    }
}

@media screen and (min-width: 768px) {
    .inventory-grid {
        grid-template-columns: repeat(8, 1fr);
    }
}

@media screen and (min-width: 1024px) {
    .inventory-grid {
        grid-template-columns: repeat(10, 1fr);
    }
}

/* Equipment section responsive */
.equipment-section {
    width: 100%;
    margin-bottom: var(--spacing-md);
}

@media screen and (min-width: 768px) {
    .equipment-section {
        width: 200px;
        margin-bottom: 0;
    }
}

.equipment-grid {
    grid-template-columns: repeat(4, 1fr);
}

@media screen and (min-width: 768px) {
    .equipment-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

/* ===== Dialogue Responsive ===== */

.dialogue-box {
    margin: 0 var(--spacing-sm);
}

@media screen and (min-width: 768px) {
    .dialogue-box {
        margin: 0 auto;
        max-width: 800px;
    }
}

/* Portrait positioning */
.portrait-container {
    display: none;
}

@media screen and (min-width: 768px) {
    .portrait-container {
        display: block;
    }
}

/* Dialogue choices stacking */
.dialogue-choices {
    gap: var(--spacing-xs);
}

@media screen and (min-width: 640px) {
    .dialogue-choices {
        gap: var(--spacing-sm);
    }
}

/* ===== Menu Responsive ===== */

.menu-content {
    width: 90vw;
    max-width: 400px;
    padding: var(--spacing-md);
}

@media screen and (min-width: 768px) {
    .menu-content {
        width: auto;
        min-width: 350px;
        padding: var(--spacing-xl);
    }
}

.menu-button {
    padding: var(--spacing-sm) var(--spacing-md);
    font-size: var(--font-size-md);
}

@media screen and (min-width: 768px) {
    .menu-button {
        padding: var(--spacing-md) var(--spacing-lg);
        font-size: var(--font-size-lg);
    }
}

/* ===== Settings Responsive ===== */

.settings-panel {
    flex-direction: column;
}

@media screen and (min-width: 768px) {
    .settings-panel {
        flex-direction: row;
    }
}

.settings-sidebar {
    width: 100%;
    border-right: none;
    border-bottom: 1px solid var(--border-primary);
}

@media screen and (min-width: 768px) {
    .settings-sidebar {
        width: 200px;
        border-right: 1px solid var(--border-primary);
        border-bottom: none;
    }
}

.settings-categories {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
}

@media screen and (min-width: 768px) {
    .settings-categories {
        display: block;
    }
}

.category-btn {
    width: auto;
    padding: var(--spacing-sm) var(--spacing-md);
}

@media screen and (min-width: 768px) {
    .category-btn {
        width: 100%;
        padding: var(--spacing-md);
    }
}

.setting-item {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--spacing-sm);
}

@media screen and (min-width: 640px) {
    .setting-item {
        flex-direction: row;
        align-items: center;
        gap: 0;
    }
}

.setting-slider input[type="range"] {
    width: 100%;
}

@media screen and (min-width: 640px) {
    .setting-slider input[type="range"] {
        width: 150px;
    }
}

/* ===== HUD Responsive ===== */

.hud-section {
    padding: var(--spacing-sm);
}

@media screen and (min-width: 768px) {
    .hud-section {
        padding: var(--spacing-md);
    }
}

/* Player info scaling */
.player-info {
    transform-origin: top left;
}

@media screen and (max-width: 640px) {
    .player-info {
        transform: scale(0.8);
    }

    .player-portrait {
        width: 50px;
        height: 50px;
    }

    .player-stats {
        width: 140px;
    }
}

/* Ability bar responsive */
.ability-bar {
    flex-wrap: wrap;
    justify-content: center;
    max-width: 90vw;
}

.ability-slot {
    width: 45px;
    height: 45px;
}

@media screen and (min-width: 480px) {
    .ability-slot {
        width: 50px;
        height: 50px;
    }
}

@media screen and (min-width: 768px) {
    .ability-slot {
        width: 55px;
        height: 55px;
    }
}

/* ===== Minimap Responsive ===== */

.minimap-container {
    transform-origin: top right;
}

@media screen and (max-width: 640px) {
    .minimap-container {
        transform: scale(0.7);
    }

    .minimap {
        width: 150px;
        height: 150px;
    }
}

@media screen and (min-width: 1280px) {
    .minimap {
        width: 250px;
        height: 250px;
    }
}

/* ===== Chat Responsive ===== */

.chat-window {
    width: calc(100vw - 2 * var(--spacing-md));
    max-width: 350px;
}

@media screen and (max-width: 640px) {
    .chat-window {
        left: var(--spacing-sm);
        bottom: var(--spacing-sm);
        width: calc(100vw - 2 * var(--spacing-sm));
    }

    .chat-messages {
        height: 100px;
    }
}

@media screen and (min-width: 1024px) {
    .chat-window {
        max-width: 400px;
    }

    .chat-messages {
        height: 200px;
    }
}

/* ===== Tooltip Responsive ===== */

.tooltip {
    max-width: calc(100vw - 2 * var(--spacing-md));
}

@media screen and (min-width: 768px) {
    .tooltip {
        max-width: 350px;
    }
}

/* ===== Notification Responsive ===== */

.notification-container {
    right: var(--spacing-sm);
    top: var(--spacing-sm);
    width: calc(100vw - 2 * var(--spacing-sm));
    max-width: 300px;
}

@media screen and (min-width: 768px) {
    .notification-container {
        right: var(--spacing-md);
        top: var(--spacing-md);
        max-width: 350px;
    }
}

/* ===== Fullscreen Map Responsive ===== */

.fullmap-overlay {
    padding: var(--spacing-sm);
}

@media screen and (min-width: 768px) {
    .fullmap-overlay {
        padding: var(--spacing-xl);
    }
}

.fullmap-container {
    width: 100%;
    height: 100%;
}

@media screen and (min-width: 1024px) {
    .fullmap-container {
        width: 80vw;
        height: 80vh;
        max-width: 1200px;
    }
}

/* ===== Touch Device Optimizations ===== */

@media (pointer: coarse) {
    /* Larger touch targets */
    button, .btn {
        min-height: 44px;
        min-width: 44px;
    }

    .inventory-slot {
        min-width: 48px;
        min-height: 48px;
    }

    .ability-slot {
        min-width: 54px;
        min-height: 54px;
    }

    /* Remove hover effects that don't work on touch */
    .hover-lift:hover,
    .hover-grow:hover,
    .hover-glow:hover {
        transform: none;
        box-shadow: inherit;
    }

    /* Add active states instead */
    .hover-lift:active {
        transform: scale(0.98);
    }

    .hover-grow:active {
        transform: scale(0.95);
    }

    /* Larger scrollbars for touch */
    ::-webkit-scrollbar {
        width: 12px;
        height: 12px;
    }

    /* Disable context menu trigger areas */
    .minimap-canvas {
        touch-action: none;
    }
}

/* ===== High DPI / Retina Displays ===== */

@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    /* Sharper borders */
    .panel, .inventory-slot, .ability-slot {
        border-width: 0.5px;
    }

    /* Crisper shadows */
    .panel {
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    }
}

/* ===== Landscape Mode Adjustments ===== */

@media screen and (max-height: 500px) and (orientation: landscape) {
    /* Compact HUD for landscape mobile */
    .hud-top, .hud-bottom {
        padding: var(--spacing-xs);
    }

    .player-info {
        transform: scale(0.75);
    }

    .ability-bar {
        padding: var(--spacing-xs);
    }

    .ability-slot {
        width: 40px;
        height: 40px;
    }

    /* Hide minimap in compact landscape */
    .minimap-container {
        display: none;
    }

    /* Shorter dialogue box */
    .dialogue-box {
        max-height: 40vh;
    }

    .dialogue-text {
        min-height: 40px;
    }
}

/* ===== Portrait Mode Adjustments ===== */

@media screen and (max-width: 480px) and (orientation: portrait) {
    /* Stack HUD elements vertically */
    .hud-top {
        flex-direction: column;
        align-items: flex-start;
    }

    .hud-bottom {
        flex-direction: column;
        align-items: center;
    }

    /* Center ability bar */
    .ability-bar {
        margin: 0 auto;
    }
}

/* ===== Aspect Ratio Considerations ===== */

/* Ultra-wide displays */
@media screen and (min-aspect-ratio: 21/9) {
    .panel {
        max-width: 60vw;
    }

    .dialogue-box {
        max-width: 50vw;
    }

    .hud-top {
        padding-left: 10vw;
        padding-right: 10vw;
    }
}

/* Square-ish displays (tablets) */
@media screen and (min-aspect-ratio: 3/4) and (max-aspect-ratio: 4/3) {
    .minimap {
        width: 180px;
        height: 180px;
    }
}

/* ===== Safe Area Insets (Notched Devices) ===== */

@supports (padding: env(safe-area-inset-top)) {
    .hud-top {
        padding-top: max(var(--spacing-md), env(safe-area-inset-top));
    }

    .hud-bottom {
        padding-bottom: max(var(--spacing-md), env(safe-area-inset-bottom));
    }

    .panel {
        padding-left: max(var(--spacing-md), env(safe-area-inset-left));
        padding-right: max(var(--spacing-md), env(safe-area-inset-right));
    }

    .chat-window {
        left: max(var(--spacing-md), env(safe-area-inset-left));
        bottom: max(var(--spacing-md), env(safe-area-inset-bottom));
    }

    .minimap-container {
        right: max(var(--spacing-md), env(safe-area-inset-right));
        top: max(var(--spacing-md), env(safe-area-inset-top));
    }

    .notification-container {
        right: max(var(--spacing-md), env(safe-area-inset-right));
        top: max(var(--spacing-md), env(safe-area-inset-top));
    }
}

/* ===== Visibility Utilities ===== */

/* Hide on specific sizes */
.hide-xs { display: block; }
.hide-sm { display: block; }
.hide-md { display: block; }
.hide-lg { display: block; }
.show-xs { display: none; }
.show-sm { display: none; }
.show-md { display: none; }
.show-lg { display: none; }

@media screen and (max-width: 480px) {
    .hide-xs { display: none !important; }
    .show-xs { display: block !important; }
}

@media screen and (max-width: 640px) {
    .hide-sm { display: none !important; }
    .show-sm { display: block !important; }
}

@media screen and (max-width: 768px) {
    .hide-md { display: none !important; }
    .show-md { display: block !important; }
}

@media screen and (max-width: 1024px) {
    .hide-lg { display: none !important; }
    .show-lg { display: block !important; }
}

/* Mobile/Desktop visibility */
.mobile-only {
    display: block;
}

.desktop-only {
    display: none;
}

@media screen and (min-width: 768px) {
    .mobile-only {
        display: none;
    }

    .desktop-only {
        display: block;
    }
}

/* Touch/Mouse visibility */
@media (pointer: coarse) {
    .mouse-only { display: none !important; }
    .touch-only { display: block !important; }
}

@media (pointer: fine) {
    .mouse-only { display: block !important; }
    .touch-only { display: none !important; }
}
