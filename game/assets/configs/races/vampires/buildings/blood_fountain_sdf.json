{
  "id": "blood_fountain",
  "name": "Blood Fountain",
  "race": "vampires",
  "type": "building",
  "category": "support",
  "description": "An enchanted fountain of blood that heals nearby vampires and provides population capacity.",

  "sdfModel": {
    "name": "blood_fountain_model",
    "bounds": { "min": [-2.5, 0.0, -2.5], "max": [2.5, 4.0, 2.5] },
    "primitives": [
      {
        "id": "base_platform",
        "type": "Cylinder",
        "params": { "radius": 2.2, "height": 0.4 },
        "transform": { "position": [0.0, 0.2, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.12, 0.08, 0.08, 1.0], "metallic": 0.15, "roughness": 0.85 },
        "operation": "Union"
      },
      {
        "id": "lower_basin",
        "type": "Torus",
        "params": { "majorRadius": 1.8, "minorRadius": 0.3 },
        "transform": { "position": [0.0, 0.8, 0.0], "rotation": [1.57, 0.0, 0.0, 0.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.15, 0.1, 0.1, 1.0], "metallic": 0.3, "roughness": 0.7 },
        "operation": "Union"
      },
      {
        "id": "lower_basin_inner",
        "type": "Cylinder",
        "params": { "radius": 1.8, "height": 0.5 },
        "transform": { "position": [0.0, 0.85, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.15, 0.1, 0.1, 1.0], "metallic": 0.3, "roughness": 0.7 },
        "operation": "Union"
      },
      {
        "id": "blood_pool_lower",
        "type": "Cylinder",
        "params": { "radius": 1.7, "height": 0.35 },
        "transform": { "position": [0.0, 0.875, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.7, 0.05, 0.02, 0.92], "metallic": 0.6, "roughness": 0.2, "emissive": [0.4, 0.03, 0.01] },
        "operation": "Union"
      },
      {
        "id": "central_column",
        "type": "Cylinder",
        "params": { "radius": 0.25, "height": 2.0 },
        "transform": { "position": [0.0, 2.1, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.14, 0.09, 0.09, 1.0], "metallic": 0.25, "roughness": 0.75 },
        "operation": "Union"
      },
      {
        "id": "column_detail_1",
        "type": "Torus",
        "params": { "majorRadius": 0.28, "minorRadius": 0.04 },
        "transform": { "position": [0.0, 1.5, 0.0], "rotation": [1.57, 0.0, 0.0, 0.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.18, 0.12, 0.12, 1.0], "metallic": 0.4, "roughness": 0.6 },
        "operation": "Union"
      },
      {
        "id": "column_detail_2",
        "type": "Torus",
        "params": { "majorRadius": 0.28, "minorRadius": 0.04 },
        "transform": { "position": [0.0, 2.5, 0.0], "rotation": [1.57, 0.0, 0.0, 0.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.18, 0.12, 0.12, 1.0], "metallic": 0.4, "roughness": 0.6 },
        "operation": "Union"
      },
      {
        "id": "upper_basin",
        "type": "Torus",
        "params": { "majorRadius": 1.0, "minorRadius": 0.2 },
        "transform": { "position": [0.0, 3.2, 0.0], "rotation": [1.57, 0.0, 0.0, 0.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.15, 0.1, 0.1, 1.0], "metallic": 0.3, "roughness": 0.7 },
        "operation": "Union"
      },
      {
        "id": "upper_basin_inner",
        "type": "Cylinder",
        "params": { "radius": 1.0, "height": 0.35 },
        "transform": { "position": [0.0, 3.25, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.15, 0.1, 0.1, 1.0], "metallic": 0.3, "roughness": 0.7 },
        "operation": "Union"
      },
      {
        "id": "blood_pool_upper",
        "type": "Cylinder",
        "params": { "radius": 0.95, "height": 0.25 },
        "transform": { "position": [0.0, 3.275, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.75, 0.06, 0.02, 0.94], "metallic": 0.6, "roughness": 0.18, "emissive": [0.45, 0.04, 0.01] },
        "operation": "Union"
      },
      {
        "id": "blood_orb_center",
        "type": "Sphere",
        "params": { "radius": 0.35 },
        "transform": { "position": [0.0, 3.8, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.2, 1.0] },
        "material": { "baseColor": [0.85, 0.08, 0.03, 0.88], "metallic": 0.7, "roughness": 0.12, "emissive": [0.7, 0.08, 0.03] },
        "operation": "Union",
        "bone": "blood_orb"
      },
      {
        "id": "blood_stream_1",
        "type": "Cylinder",
        "params": { "radius": 0.04, "height": 0.8 },
        "transform": { "position": [0.7, 2.7, 0.0], "rotation": [0.0, 0.0, 0.2, 0.98], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.7, 0.05, 0.02, 0.9], "metallic": 0.5, "roughness": 0.25, "emissive": [0.35, 0.03, 0.01] },
        "operation": "Union",
        "bone": "stream_1"
      },
      {
        "id": "blood_stream_2",
        "type": "Cylinder",
        "params": { "radius": 0.04, "height": 0.8 },
        "transform": { "position": [-0.7, 2.7, 0.0], "rotation": [0.0, 0.0, -0.2, 0.98], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.7, 0.05, 0.02, 0.9], "metallic": 0.5, "roughness": 0.25, "emissive": [0.35, 0.03, 0.01] },
        "operation": "Union",
        "bone": "stream_2"
      },
      {
        "id": "blood_stream_3",
        "type": "Cylinder",
        "params": { "radius": 0.04, "height": 0.8 },
        "transform": { "position": [0.0, 2.7, 0.7], "rotation": [0.2, 0.0, 0.0, 0.98], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.7, 0.05, 0.02, 0.9], "metallic": 0.5, "roughness": 0.25, "emissive": [0.35, 0.03, 0.01] },
        "operation": "Union",
        "bone": "stream_3"
      },
      {
        "id": "blood_stream_4",
        "type": "Cylinder",
        "params": { "radius": 0.04, "height": 0.8 },
        "transform": { "position": [0.0, 2.7, -0.7], "rotation": [-0.2, 0.0, 0.0, 0.98], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.7, 0.05, 0.02, 0.9], "metallic": 0.5, "roughness": 0.25, "emissive": [0.35, 0.03, 0.01] },
        "operation": "Union",
        "bone": "stream_4"
      },
      {
        "id": "rune_1",
        "type": "RoundedBox",
        "params": { "size": [0.15, 0.4, 0.03], "radius": 0.01 },
        "transform": { "position": [0.0, 1.8, 1.85], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.6, 0.04, 0.02, 1.0], "metallic": 0.3, "roughness": 0.5, "emissive": [0.3, 0.02, 0.01] },
        "operation": "Union"
      },
      {
        "id": "rune_2",
        "type": "RoundedBox",
        "params": { "size": [0.15, 0.4, 0.03], "radius": 0.01 },
        "transform": { "position": [0.0, 1.8, -1.85], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.6, 0.04, 0.02, 1.0], "metallic": 0.3, "roughness": 0.5, "emissive": [0.3, 0.02, 0.01] },
        "operation": "Union"
      },
      {
        "id": "rune_3",
        "type": "RoundedBox",
        "params": { "size": [0.03, 0.4, 0.15], "radius": 0.01 },
        "transform": { "position": [1.85, 1.8, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.6, 0.04, 0.02, 1.0], "metallic": 0.3, "roughness": 0.5, "emissive": [0.3, 0.02, 0.01] },
        "operation": "Union"
      },
      {
        "id": "rune_4",
        "type": "RoundedBox",
        "params": { "size": [0.03, 0.4, 0.15], "radius": 0.01 },
        "transform": { "position": [-1.85, 1.8, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
        "material": { "baseColor": [0.6, 0.04, 0.02, 1.0], "metallic": 0.3, "roughness": 0.5, "emissive": [0.3, 0.02, 0.01] },
        "operation": "Union"
      }
    ]
  },

  "skeleton": {
    "bones": [
      { "name": "root", "parent": null, "position": [0.0, 0.0, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0] },
      { "name": "blood_orb", "parent": "root", "position": [0.0, 3.8, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0] },
      { "name": "stream_1", "parent": "root", "position": [0.7, 2.7, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0] },
      { "name": "stream_2", "parent": "root", "position": [-0.7, 2.7, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0] },
      { "name": "stream_3", "parent": "root", "position": [0.0, 2.7, 0.7], "rotation": [0.0, 0.0, 0.0, 1.0] },
      { "name": "stream_4", "parent": "root", "position": [0.0, 2.7, -0.7], "rotation": [0.0, 0.0, 0.0, 1.0] }
    ]
  },

  "animations": {
    "idle": {
      "duration": 3.0, "loop": true,
      "keyframes": [
        {
          "time": 0.0,
          "bones": {
            "blood_orb": { "position": [0.0, 3.8, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
            "stream_1": { "scale": [1.0, 1.0, 1.0] },
            "stream_2": { "scale": [1.0, 1.0, 1.0] },
            "stream_3": { "scale": [1.0, 1.0, 1.0] },
            "stream_4": { "scale": [1.0, 1.0, 1.0] }
          }
        },
        {
          "time": 1.5,
          "bones": {
            "blood_orb": { "position": [0.0, 3.95, 0.0], "rotation": [0.0, 0.2, 0.0, 0.98], "scale": [1.1, 1.15, 1.1] },
            "stream_1": { "scale": [1.2, 1.3, 1.2] },
            "stream_2": { "scale": [1.2, 1.3, 1.2] },
            "stream_3": { "scale": [1.2, 1.3, 1.2] },
            "stream_4": { "scale": [1.2, 1.3, 1.2] }
          }
        },
        {
          "time": 3.0,
          "bones": {
            "blood_orb": { "position": [0.0, 3.8, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0], "scale": [1.0, 1.0, 1.0] },
            "stream_1": { "scale": [1.0, 1.0, 1.0] },
            "stream_2": { "scale": [1.0, 1.0, 1.0] },
            "stream_3": { "scale": [1.0, 1.0, 1.0] },
            "stream_4": { "scale": [1.0, 1.0, 1.0] }
          }
        }
      ]
    },
    "healing_pulse": {
      "duration": 2.0, "loop": false,
      "keyframes": [
        { "time": 0.0, "bones": { "blood_orb": { "scale": [1.0, 1.0, 1.0] } } },
        { "time": 0.5, "bones": { "blood_orb": { "scale": [1.4, 1.6, 1.4] } }, "events": ["healing_wave"] },
        { "time": 1.0, "bones": { "blood_orb": { "scale": [1.1, 1.2, 1.1] } } },
        { "time": 2.0, "bones": { "blood_orb": { "scale": [1.0, 1.0, 1.0] } } }
      ]
    },
    "construction": {
      "duration": 40.0, "loop": false,
      "keyframes": [
        { "time": 0.0, "bones": { "root": { "position": [0.0, -3.0, 0.0], "scale": [0.5, 0.1, 0.5] } } },
        { "time": 10.0, "bones": { "root": { "position": [0.0, -1.5, 0.0], "scale": [0.7, 0.4, 0.7] } } },
        { "time": 20.0, "bones": { "root": { "position": [0.0, -0.8, 0.0], "scale": [0.85, 0.7, 0.85] } } },
        { "time": 30.0, "bones": { "root": { "position": [0.0, -0.2, 0.0], "scale": [0.95, 0.9, 0.95] } } },
        { "time": 40.0, "bones": { "root": { "position": [0.0, 0.0, 0.0], "scale": [1.0, 1.0, 1.0] } } }
      ]
    },
    "destruction": {
      "duration": 2.0, "loop": false,
      "keyframes": [
        { "time": 0.0, "bones": { "root": { "position": [0.0, 0.0, 0.0], "rotation": [0.0, 0.0, 0.0, 1.0] } } },
        { "time": 0.6, "bones": { "root": { "position": [0.0, -0.3, 0.0], "rotation": [0.1, 0.0, 0.05, 0.99] } }, "events": ["crack"] },
        { "time": 1.2, "bones": { "root": { "position": [0.0, -1.2, 0.0], "rotation": [0.2, 0.0, 0.15, 0.97] } }, "events": ["shatter"] },
        { "time": 2.0, "bones": { "root": { "position": [0.0, -2.5, 0.0], "rotation": [0.35, 0.1, 0.25, 0.89] } } }
      ]
    }
  },

  "animationStateMachine": {
    "initialState": "idle",
    "states": {
      "idle": { "animation": "idle", "transitions": [{ "to": "healing_pulse", "condition": "triggerHeal" }, { "to": "construction", "condition": "isConstructing" }, { "to": "destruction", "condition": "isDestroyed" }] },
      "healing_pulse": { "animation": "healing_pulse", "transitions": [{ "to": "idle", "condition": "animationComplete" }] },
      "construction": { "animation": "construction", "transitions": [{ "to": "idle", "condition": "animationComplete" }] },
      "destruction": { "animation": "destruction", "transitions": [] }
    }
  },

  "behaviors": {
    "on_construct_start": { "actions": [{ "type": "play_animation", "animation": "construction" }, { "type": "spawn_effect", "effect": "blood_fountain_construction" }, { "type": "play_sound", "sound": "fountain_build" }] },
    "on_construct_complete": { "actions": [{ "type": "play_animation", "animation": "idle" }, { "type": "play_sound", "sound": "fountain_ready" }, { "type": "spawn_effect", "effect": "blood_surge" }] },
    "on_healing_trigger": { "actions": [{ "type": "play_animation", "animation": "healing_pulse" }, { "type": "spawn_effect", "effect": "healing_wave_blood" }, { "type": "play_sound", "sound": "blood_heal" }] },
    "on_destruction": { "actions": [{ "type": "play_animation", "animation": "destruction" }, { "type": "spawn_effect", "effect": "fountain_shatter_blood" }, { "type": "play_sound", "sound": "fountain_destruction" }] }
  }
}
