{
    "id": "fairy_faerie_dragon",
    "type": "unit",
    "race": "fairies",
    "name": "Faerie Dragon",
    "description": "Whimsical flying dragons that phase in and out of reality. Their attacks burn enemy mana and they can turn invisible automatically.",

    "tags": ["military", "flying", "tier2", "magic", "anti_caster", "stealth"],

    "tier": 2,
    "age_requirement": 3,

    "model": {
        "path": "models/races/fairies/units/faerie_dragon.obj",
        "scale": [1.0, 1.0, 1.0],
        "offset": [0.0, 0.0, 0.0]
    },

    "textures": {
        "diffuse": "textures/races/fairies/units/faerie_dragon_diffuse.png",
        "normal": "textures/races/fairies/units/faerie_dragon_normal.png",
        "emissive": "textures/races/fairies/units/faerie_dragon_glow.png"
    },

    "collision": {
        "shapes": [
            {
                "type": "capsule",
                "radius": 0.4,
                "height": 1.2,
                "offset": [0.0, 1.5, 0.0]
            }
        ],
        "body_type": "dynamic",
        "mass": 120.0,
        "layer": "flying_unit"
    },

    "stats": {
        "health": 400,
        "maxHealth": 400,
        "healthRegen": 0.5,
        "mana": 300,
        "maxMana": 300,
        "manaRegen": 1.5,
        "armor": 1,
        "magicResist": 40,
        "moveSpeed": 6.0,
        "turnRate": 280.0
    },

    "combat": {
        "attackDamage": 22,
        "attackSpeed": 1.6,
        "attackRange": 6.0,
        "damageType": "magic",
        "armorType": "light",
        "attackType": "ranged",
        "projectile": "fae_breath",
        "projectile_speed": 16.0,
        "splash_damage": 0.15,
        "splash_radius": 2.0
    },

    "flying": {
        "enabled": true,
        "flight_height": 4.0,
        "can_hover": true,
        "air_superiority": true
    },

    "abilities": [
        {
            "id": "ability_mana_burn",
            "name": "Mana Burn",
            "description": "Burns mana from the target enemy unit and deals damage equal to mana burned",
            "hotkey": "B",
            "cooldown": 9.0,
            "mana_cost": 65,
            "range": 8.0,
            "effects": [
                {"type": "mana_burn", "value": 100},
                {"type": "damage", "value_from_mana_burned": 1.0, "damage_type": "magic"}
            ],
            "auto_cast": true
        },
        {
            "id": "ability_phase_shift_dragon",
            "name": "Phase Shift",
            "description": "Automatically becomes ethereal when not attacking, avoiding damage",
            "passive": true,
            "auto_activate_delay": 3.0,
            "effects": [
                {"type": "ethereal", "value": true},
                {"type": "invulnerable", "value": true}
            ]
        },
        {
            "id": "ability_mana_flare",
            "name": "Mana Flare",
            "description": "Creates an aura that damages enemies when they cast spells",
            "hotkey": "F",
            "toggle": true,
            "mana_drain_per_second": 5,
            "radius": 8.0,
            "effects": [
                {"type": "on_enemy_cast", "damage": 75, "damage_type": "magic"}
            ],
            "requires_upgrade": "upgrade_mana_flare"
        }
    ],

    "stealth": {
        "enabled": true,
        "auto_cloak_delay": 4.0,
        "cloak_on_idle": true,
        "reveal_on_attack": true,
        "reveal_duration": 3.0
    },

    "night_bonus": {
        "attackDamage": 0.25,
        "mana_burn_bonus": 25,
        "cloak_delay_reduction": 2.0
    },

    "upgrades": [
        {
            "id": "upgrade_faerie_dragon_weapons",
            "stat": "attackDamage",
            "bonus_per_level": 4
        },
        {
            "id": "upgrade_faerie_dragon_armor",
            "stat": "armor",
            "bonus_per_level": 1
        }
    ],

    "production": {
        "building": "fairy_ancient_of_wind",
        "cost": {
            "gold": 155,
            "wood": 50,
            "food": 3
        },
        "build_time": 30.0,
        "population_cost": 2,
        "prerequisites": ["fairy_tree_of_ages"]
    },

    "ai": {
        "behaviorTree": "ai/behaviors/faerie_dragon.bt",
        "profile": "hit_and_run",
        "aggroRange": 12.0,
        "leashRange": 30.0,
        "priority_targets": ["caster", "ranged"],
        "use_phase_shift": true,
        "mana_burn_threshold": 50
    },

    "animations": {
        "idle": {"path": "animations/fairies/faerie_dragon/idle.anim", "loop": true},
        "fly": {"path": "animations/fairies/faerie_dragon/fly.anim", "loop": true},
        "attack": {"path": "animations/fairies/faerie_dragon/attack.anim", "loop": false},
        "mana_burn": {"path": "animations/fairies/faerie_dragon/mana_burn.anim", "loop": false},
        "phase": {"path": "animations/fairies/faerie_dragon/phase.anim", "loop": true},
        "death": {"path": "animations/fairies/faerie_dragon/death.anim", "loop": false}
    },

    "sounds": {
        "select": ["sounds/fairies/faerie_dragon/select_1.wav", "sounds/fairies/faerie_dragon/select_2.wav"],
        "acknowledge": ["sounds/fairies/faerie_dragon/ack_1.wav", "sounds/fairies/faerie_dragon/ack_2.wav"],
        "attack": "sounds/fairies/faerie_dragon/attack.wav",
        "mana_burn": "sounds/fairies/faerie_dragon/mana_burn.wav",
        "phase": "sounds/fairies/faerie_dragon/phase.wav",
        "death": "sounds/fairies/faerie_dragon/death.wav"
    },

    "ui": {
        "portrait": "textures/races/fairies/portraits/faerie_dragon.png",
        "icon": "textures/races/fairies/icons/faerie_dragon.png",
        "hotkey": "F"
    }
}
