{
  "$schema": "../../../../../schemas/building_archetype.schema.json",

  "parentArchetype": "spawner_building_archetype",
  "id": "naga_tidal_temple",
  "name": "Tidal Temple",
  "description": "Sacred temple where Naga warriors train and water magic is taught. Built from living coral and blessed by the tides.",

  "category": "military",
  "tier": 1,

  "size": {
    "width": 4,
    "height": 4,
    "footprintShape": "square"
  },

  "placement": {
    "requiresLand": false,
    "canPlaceOnWater": true,
    "canPlaceOnLand": true,
    "requiresShallowWater": true,
    "requiresFlatTerrain": false,
    "minDistanceFromOther": 3.0,
    "blocksPathing": true,
    "providesVision": true,
    "waterProximityRequired": true,
    "waterProximityRange": 8.0
  },

  "health": 1200,
  "healthRegen": 1.5,
  "armor": 5,
  "magicResist": 3,

  "spawner": {
    "queueSize": 5,
    "simultaneousProduction": 1,
    "queueType": "sequential",

    "hasRallyPoint": true,
    "rallyPointRange": 50.0,

    "spawnOffset": {
      "x": 2.5,
      "y": 0.0,
      "z": 0.0
    },
    "spawnAnimation": "anim_temple_doors",
    "spawnEffect": "effects/tidal_emerge.fx",

    "productionSpeedMultiplier": 1.0,
    "productionSpeedInWater": 1.3
  },

  "productionQueue": [
    {
      "type": "unit",
      "id": "naga_warrior",
      "name": "Naga Warrior",
      "requiredAge": 0,
      "hotkey": "W"
    },
    {
      "type": "unit",
      "id": "naga_sea_archer",
      "name": "Sea Archer",
      "requiredAge": 0,
      "hotkey": "A"
    },
    {
      "type": "unit",
      "id": "naga_riptide",
      "name": "Riptide",
      "requiredAge": 1,
      "hotkey": "R"
    },
    {
      "type": "unit",
      "id": "naga_manta_rider",
      "name": "Manta Rider",
      "requiredAge": 1,
      "requiredTech": "manta_domestication",
      "hotkey": "M"
    },
    {
      "type": "tech",
      "id": "naga_melee_attack_1",
      "name": "Coral Weapons I",
      "description": "+1 attack for melee units",
      "cost": {"gold": 100, "stone": 50},
      "researchTime": 40,
      "hotkey": "Q"
    },
    {
      "type": "tech",
      "id": "naga_ranged_attack_1",
      "name": "Crystal Harpoons I",
      "description": "+1 attack for ranged units",
      "cost": {"gold": 100, "wood": 50},
      "researchTime": 40,
      "hotkey": "E"
    }
  ],

  "research": {
    "canResearch": true,
    "researchSlots": 1,
    "researchSpeedMultiplier": 1.0,
    "availableTech": [
      "naga_melee_attack_1",
      "naga_melee_attack_2",
      "naga_melee_attack_3",
      "naga_ranged_attack_1",
      "naga_armor_1",
      "venom_mastery",
      "amphibious_training"
    ]
  },

  "cost": {
    "gold": 220,
    "wood": 0,
    "food": 0,
    "stone": 120,
    "mana": 50
  },

  "buildTime": 55,
  "requiredBuilding": "naga_coral_reef",
  "requiredAge": 0,

  "providesPopulation": 5,

  "garrisonCapacity": 5,
  "canGarrison": true,

  "attackCapability": {
    "canAttack": true,
    "damage": 12,
    "attackSpeed": 1.2,
    "attackRange": 8,
    "attackType": "pierce",
    "targetAir": true,
    "targetGround": true,
    "projectileType": "water_spear"
  },

  "canUpgrade": true,
  "upgradesTo": "naga_grand_temple",
  "upgradeCost": {
    "gold": 350,
    "stone": 250,
    "mana": 150
  },
  "upgradeTime": 75,

  "isPermanent": true,
  "isMilitary": true,

  "aura": {
    "hasAura": true,
    "auraRadius": 12.0,
    "auraType": "training",
    "auraEffects": [
      {
        "type": "attack_speed",
        "value": 0.1,
        "affectsNagaOnly": true
      }
    ]
  },

  "visuals": {
    "model": "models/buildings/naga/tidal_temple.fbx",
    "icon": "textures/icons/buildings/naga/tidal_temple.png",
    "portrait": "textures/portraits/naga/tidal_temple.png",

    "constructionStages": 5,
    "glowAtNight": true,
    "glowColor": "#00AAFF",

    "bioluminescence": {
      "enabled": true,
      "intensity": 0.85,
      "patterns": ["temple_runes", "water_flow"]
    }
  },

  "sounds": {
    "select": ["sounds/buildings/naga/temple/select1.wav"],
    "trainComplete": "sounds/buildings/naga/temple/warrior_ready.wav",
    "ambient": "sounds/ambient/temple_chant.wav"
  },

  "modularBuilding": {
    "enabled": true,
    "maxComponents": 6,
    "allowedComponents": [
      "training_pool_component",
      "weapon_rack_component",
      "tidal_altar_component",
      "temple_spire_component"
    ]
  },

  "racialTraits": {
    "race": "naga",
    "living": true,
    "coralConstruction": true,
    "environmentalBonuses": {
      "inWater": {
        "productionSpeed": 1.3,
        "healthRegen": 2.0
      }
    }
  },

  "metadata": {
    "author": "Claude",
    "notes": "Naga barracks. Trains basic and advanced combat units. Researches combat upgrades."
  }
}
