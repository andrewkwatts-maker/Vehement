{
    "id": "human_crossbowman",
    "type": "unit",
    "race": "humans",
    "name": "Crossbowman",
    "description": "Elite marksmen armed with heavy crossbows capable of piercing the thickest armor. Slower than archers but far more deadly.",

    "tags": ["military", "ranged", "tier2", "medium", "armor_piercing"],

    "tier": 2,
    "age_requirement": 3,

    "model": {
        "path": "models/races/humans/units/crossbowman.obj",
        "scale": [1.0, 1.0, 1.0],
        "offset": [0.0, 0.0, 0.0]
    },

    "textures": {
        "diffuse": "textures/races/humans/units/crossbowman_diffuse.png",
        "normal": "textures/races/humans/units/crossbowman_normal.png"
    },

    "collision": {
        "shapes": [
            {
                "type": "capsule",
                "radius": 0.3,
                "height": 1.75,
                "offset": [0.0, 0.875, 0.0]
            }
        ],
        "body_type": "dynamic",
        "mass": 80.0,
        "layer": "unit"
    },

    "stats": {
        "health": 240,
        "maxHealth": 240,
        "healthRegen": 0.5,
        "armor": 2,
        "magicResist": 8,
        "moveSpeed": 4.5,
        "turnRate": 320.0
    },

    "combat": {
        "attackDamage": 22,
        "attackSpeed": 2.0,
        "attackRange": 13.0,
        "damageType": "piercing",
        "armorType": "medium",
        "attackType": "ranged",
        "critChance": 0.15,
        "critMultiplier": 2.5,
        "armor_penetration": 8,
        "projectile_id": "crossbow_bolt"
    },

    "projectile": {
        "id": "crossbow_bolt",
        "model": "models/projectiles/crossbow_bolt.obj",
        "speed": 45.0,
        "lifetime": 2.5,
        "gravity": 0.2,
        "trailEffect": "effects/bolt_trail.fx",
        "impactEffect": "effects/bolt_impact.fx"
    },

    "abilities": [
        {
            "id": "ability_armor_piercing_bolt",
            "name": "Armor Piercing Bolt",
            "description": "Fire a specially crafted bolt that ignores 50% of target armor",
            "hotkey": "Q",
            "cooldown": 12.0,
            "effects": [
                {"type": "armor_ignore", "value": 0.50}
            ]
        },
        {
            "id": "ability_deploy",
            "name": "Deploy",
            "description": "Set up crossbow for +30% damage and +3 range, but cannot move",
            "hotkey": "D",
            "toggle": true,
            "setup_time": 1.5,
            "effects": [
                {"stat": "attackDamage", "value": 0.30, "type": "percent"},
                {"stat": "attackRange", "value": 3, "type": "flat"},
                {"stat": "move_speed", "value": -1.0, "type": "percent"}
            ]
        }
    ],

    "upgrades": [
        {
            "id": "upgrade_crossbow_damage",
            "stat": "attackDamage",
            "bonus_per_level": 4
        },
        {
            "id": "upgrade_crossbow_armor_pen",
            "stat": "armor_penetration",
            "bonus_per_level": 2
        }
    ],

    "production": {
        "building": "human_archery_range",
        "cost": {
            "gold": 220,
            "wood": 35,
            "food": 2
        },
        "build_time": 30.0,
        "population_cost": 2,
        "prerequisites": ["upgrade_crossbow_tech"]
    },

    "ai": {
        "behaviorTree": "ai/behaviors/ranged_infantry.bt",
        "profile": "defensive",
        "aggroRange": 13.0,
        "leashRange": 18.0,
        "preferred_distance": 11.0,
        "priority_targets": ["heavy", "cavalry"]
    },

    "animations": {
        "idle": {"path": "animations/humans/crossbowman/idle.anim", "loop": true},
        "walk": {"path": "animations/humans/crossbowman/walk.anim", "loop": true},
        "run": {"path": "animations/humans/crossbowman/run.anim", "loop": true},
        "attack": {"path": "animations/humans/crossbowman/shoot.anim", "loop": false, "events": [[0.6, "fire_projectile"]]},
        "reload": {"path": "animations/humans/crossbowman/reload.anim", "loop": false},
        "deploy": {"path": "animations/humans/crossbowman/deploy.anim", "loop": false},
        "death": {"path": "animations/humans/crossbowman/death.anim", "loop": false}
    },

    "sounds": {
        "select": ["sounds/humans/crossbowman/select_1.wav", "sounds/humans/crossbowman/select_2.wav"],
        "acknowledge": ["sounds/humans/crossbowman/ack_1.wav", "sounds/humans/crossbowman/ack_2.wav"],
        "attack": "sounds/crossbow_fire.wav",
        "reload": "sounds/crossbow_reload.wav",
        "death": "sounds/humans/crossbowman/death.wav"
    },

    "ui": {
        "portrait": "textures/races/humans/portraits/crossbowman.png",
        "icon": "textures/races/humans/icons/crossbowman.png",
        "hotkey": "C"
    }
}
