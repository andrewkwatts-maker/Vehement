{
  "id": "torture_chamber",
  "type": "building",
  "race": "vampires",
  "name": "Torture Chamber",
  "description": "A gruesome facility where victims are processed into upgrades and Flesh Golems are created from corpses.",

  "tags": ["upgrade", "production", "corpse"],
  "tier": 2,
  "age_requirement": 2,

  "model": {
    "path": "models/races/vampires/buildings/torture_chamber.obj",
    "scale": [1.0, 1.0, 1.0]
  },

  "textures": {
    "diffuse": "textures/races/vampires/buildings/torture_chamber_diffuse.png",
    "normal": "textures/races/vampires/buildings/torture_chamber_normal.png"
  },

  "footprint": {
    "size": [3, 3],
    "entrances": [[1, 0]],
    "visualSize": [8.0, 6.0, 8.0]
  },

  "construction": {
    "cost": {
      "gold": 220,
      "lumber": 100,
      "blood": 40
    },
    "time": 55.0
  },

  "stats": {
    "maxHealth": 1100,
    "armor": 10,
    "magicResist": 5
  },

  "production": [
    {
      "type": "unit",
      "output": "flesh_golem",
      "cost": {"gold": 300, "lumber": 50, "blood": 30, "food": 5},
      "corpsesCost": 3,
      "time": 55.0,
      "maxQueue": 2,
      "prerequisites": ["citadel_of_night"]
    }
  ],

  "researches": [
    {
      "id": "crimson_claws",
      "name": "Crimson Claws",
      "description": "Increases melee vampire attack damage",
      "cost": {"gold": 150, "lumber": 75},
      "time": 50.0,
      "levels": 3,
      "effectPerLevel": {"attackDamage": 2}
    },
    {
      "id": "shadow_hide",
      "name": "Shadow Hide",
      "description": "Increases vampire unit armor",
      "cost": {"gold": 150, "lumber": 75},
      "time": 50.0,
      "levels": 3,
      "effectPerLevel": {"armor": 1}
    },
    {
      "id": "unholy_constitution",
      "name": "Unholy Constitution",
      "description": "Increases Nosferatu and monster health",
      "cost": {"gold": 200, "lumber": 100},
      "time": 60.0,
      "levels": 3,
      "effectPerLevel": {"healthPercent": 0.10}
    },
    {
      "id": "hardened_flesh",
      "name": "Hardened Flesh",
      "description": "Increases Flesh Golem armor and health",
      "cost": {"gold": 200, "blood": 50},
      "time": 55.0,
      "prerequisites": ["citadel_of_night"]
    }
  ],

  "abilities": [
    {
      "id": "corpse_storage",
      "name": "Corpse Storage",
      "type": "passive",
      "description": "Stores up to 8 corpses for Flesh Golem creation",
      "effects": {
        "maxCorpses": 8,
        "corpseGatherRadius": 500
      }
    },
    {
      "id": "blood_extraction",
      "name": "Blood Extraction",
      "type": "active",
      "targetType": "self",
      "description": "Convert stored corpses into Blood (5 per corpse)",
      "cooldown": 30,
      "effects": {
        "bloodPerCorpse": 5,
        "consumesAllCorpses": true
      }
    }
  ],

  "visionRange": 10.0,

  "requirements": {
    "buildings": ["blood_castle"]
  },

  "unique": false,
  "maxCount": 2,

  "ui": {
    "portrait": "textures/races/vampires/portraits/buildings/torture_chamber.png",
    "icon": "textures/races/vampires/icons/buildings/torture_chamber.png",
    "hotkey": "T"
  }
}
