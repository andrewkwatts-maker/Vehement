{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "master.schema.json",
  "title": "Nova3D/Vehement2 Master Schema",
  "description": "Master schema referencing all game system schemas for the Nova3D/Vehement2 engine",
  "type": "object",

  "definitions": {
    "schemaReference": {
      "type": "object",
      "properties": {
        "name": { "type": "string" },
        "file": { "type": "string" },
        "description": { "type": "string" },
        "version": { "type": "string" }
      },
      "required": ["name", "file"]
    }
  },

  "properties": {
    "version": {
      "type": "string",
      "const": "1.0.0",
      "description": "Schema version"
    },
    "engine": {
      "type": "string",
      "const": "Nova3D/Vehement2",
      "description": "Engine name"
    },
    "schemas": {
      "type": "object",
      "description": "All available game system schemas",
      "properties": {
        "common": {
          "type": "object",
          "properties": {
            "file": { "const": "common.schema.json" },
            "description": { "const": "Shared definitions (events, modifiers, conditions, colors, vectors)" },
            "category": { "const": "core" }
          }
        },
        "spell": {
          "type": "object",
          "properties": {
            "file": { "const": "spell.schema.json" },
            "description": { "const": "Spell and magic ability definitions" },
            "category": { "const": "combat" },
            "idPattern": { "const": "^spell_[a-z_]+$" }
          }
        },
        "effect": {
          "type": "object",
          "properties": {
            "file": { "const": "effect.schema.json" },
            "description": { "const": "Buff, debuff, and status effect definitions" },
            "category": { "const": "combat" },
            "idPattern": { "const": "^effect_[a-z_]+$" }
          }
        },
        "unit": {
          "type": "object",
          "properties": {
            "file": { "const": "unit.schema.json" },
            "description": { "const": "Unit/creature definitions (zombies, NPCs, enemies)" },
            "category": { "const": "entities" },
            "idPattern": { "const": "^unit_[a-z_]+$" }
          }
        },
        "building": {
          "type": "object",
          "properties": {
            "file": { "const": "building.schema.json" },
            "description": { "const": "Building and structure definitions" },
            "category": { "const": "world" },
            "idPattern": { "const": "^building_[a-z_]+$" }
          }
        },
        "tile": {
          "type": "object",
          "properties": {
            "file": { "const": "tile.schema.json" },
            "description": { "const": "Terrain tile definitions" },
            "category": { "const": "world" },
            "idPattern": { "const": "^tile_[a-z_]+$" }
          }
        },
        "techtree": {
          "type": "object",
          "properties": {
            "file": { "const": "techtree.schema.json" },
            "description": { "const": "Technology/upgrade tree definitions" },
            "category": { "const": "progression" },
            "idPattern": { "const": "^techtree_[a-z_]+$" }
          }
        },
        "hero": {
          "type": "object",
          "properties": {
            "file": { "const": "hero.schema.json" },
            "description": { "const": "Hero class and character definitions" },
            "category": { "const": "entities" },
            "idPattern": { "const": "^hero_[a-z_]+$" }
          }
        },
        "ability": {
          "type": "object",
          "properties": {
            "file": { "const": "ability.schema.json" },
            "description": { "const": "Active and passive ability definitions" },
            "category": { "const": "combat" },
            "idPattern": { "const": "^ability_[a-z_]+$" }
          }
        },
        "projectile": {
          "type": "object",
          "properties": {
            "file": { "const": "projectile.schema.json" },
            "description": { "const": "Projectile type definitions" },
            "category": { "const": "combat" },
            "idPattern": { "const": "^projectile_[a-z_]+$" }
          }
        },
        "particle": {
          "type": "object",
          "properties": {
            "file": { "const": "particle.schema.json" },
            "description": { "const": "Particle system and effect definitions" },
            "category": { "const": "visual" },
            "idPattern": { "const": "^particle_[a-z_]+$" }
          }
        },
        "animation": {
          "type": "object",
          "properties": {
            "file": { "const": "animation.schema.json" },
            "description": { "const": "Animation clip and controller definitions" },
            "category": { "const": "visual" },
            "idPattern": { "const": "^anim_[a-z_]+$" }
          }
        },
        "sound": {
          "type": "object",
          "properties": {
            "file": { "const": "sound.schema.json" },
            "description": { "const": "Sound effect and music definitions" },
            "category": { "const": "audio" },
            "idPattern": { "const": "^sound_[a-z_]+$" }
          }
        },
        "quest": {
          "type": "object",
          "properties": {
            "file": { "const": "quest.schema.json" },
            "description": { "const": "Quest and mission definitions" },
            "category": { "const": "gameplay" },
            "idPattern": { "const": "^quest_[a-z_]+$" }
          }
        },
        "dialogue": {
          "type": "object",
          "properties": {
            "file": { "const": "dialogue.schema.json" },
            "description": { "const": "Dialogue tree and conversation definitions" },
            "category": { "const": "narrative" },
            "idPattern": { "const": "^dialogue_[a-z_]+$" }
          }
        },
        "loot": {
          "type": "object",
          "properties": {
            "file": { "const": "loot.schema.json" },
            "description": { "const": "Loot table and drop definitions" },
            "category": { "const": "gameplay" },
            "idPattern": { "const": "^loot_[a-z_]+$" }
          }
        }
      }
    },
    "categories": {
      "type": "object",
      "description": "Schema categories for organization",
      "properties": {
        "core": {
          "type": "object",
          "properties": {
            "name": { "const": "Core" },
            "description": { "const": "Core engine definitions and shared types" },
            "schemas": {
              "type": "array",
              "items": { "const": "common" }
            }
          }
        },
        "combat": {
          "type": "object",
          "properties": {
            "name": { "const": "Combat" },
            "description": { "const": "Combat-related definitions" },
            "schemas": {
              "type": "array",
              "items": { "enum": ["spell", "effect", "ability", "projectile"] }
            }
          }
        },
        "entities": {
          "type": "object",
          "properties": {
            "name": { "const": "Entities" },
            "description": { "const": "Entity definitions" },
            "schemas": {
              "type": "array",
              "items": { "enum": ["unit", "hero"] }
            }
          }
        },
        "world": {
          "type": "object",
          "properties": {
            "name": { "const": "World" },
            "description": { "const": "World and environment definitions" },
            "schemas": {
              "type": "array",
              "items": { "enum": ["tile", "building"] }
            }
          }
        },
        "visual": {
          "type": "object",
          "properties": {
            "name": { "const": "Visual" },
            "description": { "const": "Visual effect definitions" },
            "schemas": {
              "type": "array",
              "items": { "enum": ["particle", "animation"] }
            }
          }
        },
        "audio": {
          "type": "object",
          "properties": {
            "name": { "const": "Audio" },
            "description": { "const": "Audio definitions" },
            "schemas": {
              "type": "array",
              "items": { "const": "sound" }
            }
          }
        },
        "gameplay": {
          "type": "object",
          "properties": {
            "name": { "const": "Gameplay" },
            "description": { "const": "Gameplay system definitions" },
            "schemas": {
              "type": "array",
              "items": { "enum": ["quest", "loot"] }
            }
          }
        },
        "progression": {
          "type": "object",
          "properties": {
            "name": { "const": "Progression" },
            "description": { "const": "Player progression definitions" },
            "schemas": {
              "type": "array",
              "items": { "const": "techtree" }
            }
          }
        },
        "narrative": {
          "type": "object",
          "properties": {
            "name": { "const": "Narrative" },
            "description": { "const": "Story and dialogue definitions" },
            "schemas": {
              "type": "array",
              "items": { "const": "dialogue" }
            }
          }
        }
      }
    }
  },

  "allOf": [
    {
      "properties": {
        "spell": { "$ref": "spell.schema.json" }
      }
    },
    {
      "properties": {
        "effect": { "$ref": "effect.schema.json" }
      }
    },
    {
      "properties": {
        "unit": { "$ref": "unit.schema.json" }
      }
    },
    {
      "properties": {
        "building": { "$ref": "building.schema.json" }
      }
    },
    {
      "properties": {
        "tile": { "$ref": "tile.schema.json" }
      }
    },
    {
      "properties": {
        "techtree": { "$ref": "techtree.schema.json" }
      }
    },
    {
      "properties": {
        "hero": { "$ref": "hero.schema.json" }
      }
    },
    {
      "properties": {
        "ability": { "$ref": "ability.schema.json" }
      }
    },
    {
      "properties": {
        "projectile": { "$ref": "projectile.schema.json" }
      }
    },
    {
      "properties": {
        "particle": { "$ref": "particle.schema.json" }
      }
    },
    {
      "properties": {
        "animation": { "$ref": "animation.schema.json" }
      }
    },
    {
      "properties": {
        "sound": { "$ref": "sound.schema.json" }
      }
    },
    {
      "properties": {
        "quest": { "$ref": "quest.schema.json" }
      }
    },
    {
      "properties": {
        "dialogue": { "$ref": "dialogue.schema.json" }
      }
    },
    {
      "properties": {
        "loot": { "$ref": "loot.schema.json" }
      }
    }
  ]
}
