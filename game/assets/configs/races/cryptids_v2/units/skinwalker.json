{
  "$schema": "../../../../schemas/unit_archetype.schema.json",
  "parentArchetype": "shapeshifter",
  "id": "cryptid_skinwalker",
  "name": "Skinwalker",
  "description": "Shapeshifting cryptid that can take the form of any slain enemy. Skinwalkers are masters of deception and infiltration, transforming to confuse and divide enemy forces.",
  "race": "cryptids",
  "category": "special",
  "tier": 3,

  "baseStats": {
    "health": 380,
    "healthRegen": 0.8,
    "damage": 20,
    "damageVariance": 0.15,
    "attackSpeed": 1.3,
    "attackRange": 1.2,
    "armor": 1,
    "magicResist": 25,
    "moveSpeed": 5.5,
    "critChance": 0.10,
    "critMultiplier": 1.8
  },

  "cost": {
    "gold": 320,
    "wood": 60,
    "food": 3
  },

  "trainTime": 45,
  "populationCost": 3,
  "requiredBuilding": "cryptid_shadow_pool",
  "requiredAge": 2,

  "armorType": "light",
  "attackType": "normal",

  "abilities": [
    {
      "id": "transform",
      "name": "Shapeshift",
      "description": "Transform into a nearby corpse, gaining their appearance, stats, and basic abilities for 60 seconds",
      "type": "active",
      "hotkey": "Q",
      "cooldown": 10.0,
      "requiresCorpse": true,
      "corpseRange": 3.0,
      "transformDuration": 60.0,
      "copiesStats": true,
      "copiesAbilities": ["basic"],
      "retainHealth": true
    },
    {
      "id": "mimicry",
      "name": "Perfect Mimicry",
      "description": "While transformed, appears as enemy unit to enemy players and receives 30% damage reduction",
      "type": "passive",
      "appearsAsEnemy": true,
      "effects": [
        {
          "stat": "damageReduction",
          "value": 0.30,
          "condition": "isTransformed"
        }
      ]
    },
    {
      "id": "sabotage",
      "name": "Sabotage",
      "description": "While disguised, can sabotage enemy buildings dealing 500 damage over 10 seconds before being revealed",
      "type": "active",
      "hotkey": "W",
      "cooldown": 30.0,
      "range": 1.5,
      "requiresTransform": true,
      "duration": 10.0,
      "damagePerSecond": 50,
      "revealsAfter": true,
      "targetType": "building"
    },
    {
      "id": "confusion",
      "name": "Sow Confusion",
      "description": "When revealed from disguise, nearby enemies have 50% chance to attack each other for 5 seconds",
      "type": "passive",
      "trigger": "onReveal",
      "radius": 6.0,
      "duration": 5.0,
      "confusionChance": 0.50
    },
    {
      "id": "essence_theft",
      "name": "Essence Theft",
      "description": "Transforming heals for 40% max health and grants 25% movement speed for 8 seconds",
      "type": "passive",
      "trigger": "onTransform",
      "healPercent": 0.40,
      "effects": [
        {
          "stat": "moveSpeed",
          "multiplier": 1.25,
          "duration": 8.0
        }
      ]
    }
  ],

  "upgrades": ["skinwalker_mastery", "identity_theft"],

  "visuals": {
    "model": "models/races/cryptids/units/skinwalker.obj",
    "portrait": "textures/races/cryptids/portraits/skinwalker.png",
    "icon": "textures/races/cryptids/icons/skinwalker.png",
    "scale": 1.0,
    "textures": {
      "diffuse": "textures/races/cryptids/units/skinwalker_diffuse.png",
      "normal": "textures/races/cryptids/units/skinwalker_normal.png",
      "emissive": "textures/races/cryptids/units/skinwalker_emissive.png"
    },
    "animations": {
      "idle": "animations/cryptids/skinwalker/idle.anim",
      "walk": "animations/cryptids/skinwalker/walk.anim",
      "run": "animations/cryptids/skinwalker/run.anim",
      "attack": "animations/cryptids/skinwalker/claw.anim",
      "transform": "animations/cryptids/skinwalker/transform.anim",
      "sabotage": "animations/cryptids/skinwalker/sabotage.anim",
      "death": "animations/cryptids/skinwalker/death.anim"
    },
    "particleEffects": {
      "transform_smoke": "particles/cryptids/transform_smoke.particle",
      "identity_shimmer": "particles/cryptids/identity_shimmer.particle",
      "confusion_aura": "particles/cryptids/confusion.particle"
    }
  },

  "sounds": {
    "select": ["sounds/cryptids/skinwalker/select_1.wav", "sounds/cryptids/skinwalker/select_2.wav"],
    "move": ["sounds/cryptids/skinwalker/pad.wav"],
    "attack": ["sounds/cryptids/skinwalker/claw.wav"],
    "transform": ["sounds/cryptids/skinwalker/transform.wav"],
    "death": ["sounds/cryptids/skinwalker/death.wav"],
    "ready": ["sounds/cryptids/skinwalker/ready.wav"]
  },

  "collision": {
    "type": "capsule",
    "radius": 0.35,
    "height": 1.8,
    "mass": 70.0
  },

  "ai": {
    "behaviorTree": "ai/behaviors/infiltrator.bt",
    "profile": "deceptive",
    "aggroRange": 10.0,
    "priorityTargets": ["building", "siege", "caster"],
    "preferTransform": true,
    "seekCorpses": true,
    "useSabotageOnBuildings": true
  }
}
