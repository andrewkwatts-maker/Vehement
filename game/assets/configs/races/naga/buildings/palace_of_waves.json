{
    "id": "naga_palace_of_waves",
    "type": "building",
    "name": "Palace of Waves",
    "description": "The ultimate evolution of Naga architecture. Unlocks the most powerful units and grants significant bonuses to the entire Naga empire.",
    "race": "naga",
    "tier": 3,
    "category": "main",

    "tags": ["main", "production", "resource_drop", "research", "tier3", "ultimate"],

    "model": {
        "path": "models/races/naga/buildings/palace_of_waves.obj",
        "scale": [1.5, 1.5, 1.5]
    },

    "textures": {
        "diffuse": "textures/races/naga/buildings/palace_of_waves_diffuse.png",
        "normal": "textures/races/naga/buildings/palace_of_waves_normal.png",
        "emissive": "textures/races/naga/buildings/palace_of_waves_glow.png"
    },

    "footprint": {
        "gridType": "rect",
        "size": [7, 7],
        "entrances": [[3, 0], [3, 6]],
        "visualSize": [14.0, 16.0, 14.0]
    },

    "construction": {
        "upgrade_from": "naga_temple_of_tides",
        "cost": {
            "gold": 600,
            "coral": 400,
            "pearls": 100
        },
        "time": 120.0,
        "stages": [
            {"name": "evolution", "model": "models/races/naga/buildings/palace_of_waves_evolve.obj", "progressStart": 0, "progressEnd": 100}
        ]
    },

    "stats": {
        "maxHealth": 4000,
        "armor": 12,
        "magicResist": 12
    },

    "production": [
        {
            "type": "unit",
            "output": "naga_slave",
            "amount": 1,
            "time": 8.0,
            "cost": {"gold": 50},
            "maxQueue": 12
        }
    ],

    "research": [
        {
            "id": "naga_primordial_beasts",
            "cost": {"gold": 500, "coral": 350, "abyssal_essence": 100},
            "time": 120.0
        },
        {
            "id": "naga_tidal_mastery",
            "cost": {"gold": 400, "coral": 250, "pearls": 150},
            "time": 90.0
        }
    ],

    "resource_drop": {
        "accepts": ["gold", "coral", "pearls", "abyssal_essence"],
        "bonus_near_water": 1.3
    },

    "provides": {
        "population": 30,
        "coral_generation": 8,
        "pearl_generation": 2,
        "unlock_age": "age_abyss"
    },

    "water_bonus": {
        "near_water_radius": 12,
        "health_bonus": 800,
        "regen_bonus": 15.0
    },

    "visionRange": 15.0,

    "aura": {
        "name": "Ocean's Majesty",
        "radius": 25.0,
        "global": false,
        "effects": [
            {"stat": "mana_regen", "type": "flat", "value": 1.0, "targets": "friendly_units"},
            {"stat": "damage", "type": "percent", "value": 10, "targets": "friendly_units"},
            {"stat": "health_regen", "type": "flat", "value": 2.0, "targets": "friendly_units"}
        ]
    },

    "unique": true,
    "maxCount": 1,

    "scripts": {
        "on_construct_complete": "scripts/buildings/naga/palace_of_waves/on_complete.py"
    }
}
