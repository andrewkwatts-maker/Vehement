{
    "id": "fairy_keeper",
    "type": "unit",
    "race": "fairies",
    "name": "Keeper of the Grove",
    "description": "Ancient tree-like beings who channel nature magic. Keepers can entangle enemies, summon treants, and heal allies with force of nature.",

    "tags": ["military", "caster", "tier2", "nature", "summoner", "healer"],

    "tier": 2,
    "age_requirement": 3,

    "model": {
        "path": "models/races/fairies/units/keeper.obj",
        "scale": [1.2, 1.2, 1.2],
        "offset": [0.0, 0.0, 0.0]
    },

    "textures": {
        "diffuse": "textures/races/fairies/units/keeper_diffuse.png",
        "normal": "textures/races/fairies/units/keeper_normal.png"
    },

    "collision": {
        "shapes": [
            {
                "type": "capsule",
                "radius": 0.5,
                "height": 2.5,
                "offset": [0.0, 1.25, 0.0]
            }
        ],
        "body_type": "dynamic",
        "mass": 200.0,
        "layer": "unit"
    },

    "stats": {
        "health": 500,
        "maxHealth": 500,
        "healthRegen": 1.0,
        "mana": 400,
        "maxMana": 400,
        "manaRegen": 2.0,
        "armor": 2,
        "magicResist": 25,
        "moveSpeed": 4.0,
        "turnRate": 200.0
    },

    "combat": {
        "attackDamage": 28,
        "attackSpeed": 2.0,
        "attackRange": 9.0,
        "damageType": "magic",
        "armorType": "medium",
        "attackType": "ranged",
        "projectile": "nature_bolt_large",
        "projectile_speed": 14.0
    },

    "abilities": [
        {
            "id": "ability_entangling_roots",
            "name": "Entangling Roots",
            "description": "Causes roots to burst from the ground, immobilizing and damaging an enemy",
            "hotkey": "E",
            "cooldown": 12.0,
            "mana_cost": 75,
            "range": 12.0,
            "duration": 6.0,
            "effects": [
                {"type": "root", "value": true},
                {"type": "dot", "damage": 15, "tick_rate": 1.0, "duration": 6.0}
            ]
        },
        {
            "id": "ability_force_of_nature",
            "name": "Force of Nature",
            "description": "Convert nearby trees into Treant warriors",
            "hotkey": "F",
            "cooldown": 45.0,
            "mana_cost": 125,
            "range": 15.0,
            "radius": 8.0,
            "effects": [
                {"type": "convert_trees_to_treants", "max_treants": 2},
                {"type": "treant_duration", "value": 60.0}
            ]
        },
        {
            "id": "ability_tranquility_unit",
            "name": "Tranquility",
            "description": "Channel healing energy to all nearby friendly units",
            "hotkey": "T",
            "cooldown": 60.0,
            "mana_cost": 150,
            "duration": 10.0,
            "radius": 12.0,
            "channeled": true,
            "effects": [
                {"type": "heal_per_second", "value": 25, "scope": "allies_in_radius"}
            ]
        },
        {
            "id": "ability_thorns_aura_unit",
            "name": "Thorns Aura",
            "description": "Nearby allies return damage to melee attackers",
            "passive": true,
            "radius": 10.0,
            "effects": [
                {"type": "damage_return", "value": 0.15, "condition": "melee_attacker"}
            ],
            "requires_upgrade": "upgrade_thorns_aura"
        }
    ],

    "night_bonus": {
        "manaRegen": 0.50,
        "ability_damage": 0.20
    },

    "upgrades": [
        {
            "id": "upgrade_keeper_magic",
            "stat": "spell_power",
            "bonus_per_level": 0.10
        },
        {
            "id": "upgrade_bark_hide",
            "stat": "health",
            "bonus_per_level": 75
        }
    ],

    "production": {
        "building": "fairy_ancient_of_lore",
        "cost": {
            "gold": 200,
            "wood": 80,
            "food": 4
        },
        "build_time": 38.0,
        "population_cost": 3,
        "prerequisites": ["fairy_tree_of_ages"]
    },

    "ai": {
        "behaviorTree": "ai/behaviors/support_caster.bt",
        "profile": "support",
        "aggroRange": 10.0,
        "leashRange": 25.0,
        "cast_priority": ["ability_entangling_roots", "ability_force_of_nature", "ability_tranquility_unit"],
        "heal_threshold": 0.5
    },

    "animations": {
        "idle": {"path": "animations/fairies/keeper/idle.anim", "loop": true},
        "walk": {"path": "animations/fairies/keeper/walk.anim", "loop": true},
        "attack": {"path": "animations/fairies/keeper/attack.anim", "loop": false},
        "cast": {"path": "animations/fairies/keeper/cast.anim", "loop": false},
        "channel": {"path": "animations/fairies/keeper/channel.anim", "loop": true},
        "death": {"path": "animations/fairies/keeper/death.anim", "loop": false}
    },

    "sounds": {
        "select": ["sounds/fairies/keeper/select_1.wav", "sounds/fairies/keeper/select_2.wav"],
        "acknowledge": ["sounds/fairies/keeper/ack_1.wav", "sounds/fairies/keeper/ack_2.wav"],
        "attack": "sounds/fairies/keeper/attack.wav",
        "cast": "sounds/fairies/keeper/cast.wav",
        "death": "sounds/fairies/keeper/death.wav"
    },

    "ui": {
        "portrait": "textures/races/fairies/portraits/keeper.png",
        "icon": "textures/races/fairies/icons/keeper.png",
        "hotkey": "K"
    }
}
