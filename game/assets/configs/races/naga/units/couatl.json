{
    "id": "naga_couatl",
    "type": "unit",
    "name": "Couatl",
    "description": "A magnificent flying serpent with feathered wings. These aerial guardians patrol the skies above Naga territory, striking down enemies with lightning speed.",
    "race": "naga",
    "tier": 2,
    "class": "flying",

    "tags": ["military", "flying", "ranged", "tier2", "fast", "lightning_damage"],

    "model": {
        "path": "models/races/naga/units/couatl.obj",
        "scale": [1.3, 1.3, 1.3],
        "offset": [0.0, 0.0, 0.0]
    },

    "textures": {
        "diffuse": "textures/races/naga/units/couatl_diffuse.png",
        "normal": "textures/races/naga/units/couatl_normal.png",
        "emissive": "textures/races/naga/units/couatl_glow.png"
    },

    "collision": {
        "shapes": [
            {
                "type": "capsule",
                "radius": 0.5,
                "height": 1.0,
                "offset": [0.0, 0.0, 0.0]
            }
        ],
        "body_type": "dynamic",
        "mass": 100.0,
        "layer": "flying_unit",
        "mask": ["projectile", "flying_unit"]
    },

    "movement": {
        "speed": 8.0,
        "turnRate": 250.0,
        "acceleration": 20.0,
        "deceleration": 25.0,
        "canFly": true,
        "flyHeight": 6.0,
        "hoverHeight": 4.0,
        "terrainModifiers": {
            "all": 1.0
        }
    },

    "combat": {
        "health": 380,
        "maxHealth": 380,
        "mana": 120,
        "maxMana": 120,
        "manaRegen": 0.8,
        "armor": 2,
        "magicResist": 3,
        "attackDamage": 28,
        "attackSpeed": 1.6,
        "attackRange": 8.0,
        "critChance": 0.12,
        "critMultiplier": 1.8,
        "magicalDamage": true,
        "damageType": "lightning",
        "armorType": "light"
    },

    "projectile": {
        "id": "lightning_bolt",
        "model": "models/projectiles/lightning_bolt.obj",
        "speed": 35.0,
        "lifetime": 1.0,
        "gravity": 0.0,
        "trailEffect": "effects/lightning_trail.fx",
        "impactEffect": "effects/lightning_impact.fx",
        "soundOnFire": "sounds/spells/lightning_fire.wav"
    },

    "combat_bonuses": {
        "near_water": {
            "radius": 10,
            "damage_bonus": 0.15
        }
    },

    "passive_abilities": [
        {
            "id": "chain_lightning",
            "name": "Chain Lightning",
            "description": "Attacks have a 25% chance to chain to a nearby enemy, dealing 50% damage.",
            "effect": {
                "type": "chain",
                "chance": 0.25,
                "chain_damage_percent": 0.5,
                "chain_range": 5.0
            }
        },
        {
            "id": "evasion",
            "name": "Evasion",
            "description": "Has a 15% chance to evade attacks.",
            "effect": {
                "type": "dodge",
                "chance": 0.15
            }
        }
    ],

    "abilities": [
        {
            "id": "lightning_storm",
            "name": "Lightning Storm",
            "description": "Calls down a storm of lightning in target area, dealing 40 damage per second for 4 seconds.",
            "icon": "icons/abilities/naga/lightning_storm.png",
            "cooldown": 30.0,
            "manaCost": 80,
            "range": 12.0,
            "radius": 5.0,
            "targetType": "ground",
            "duration": 4.0,
            "effects": [
                {"type": "damage_over_time", "damage_per_second": 40, "damage_type": "lightning"}
            ],
            "castTime": 0.5,
            "castAnimation": "storm_cast",
            "castSound": "sounds/abilities/lightning_storm.wav"
        },
        {
            "id": "wind_walk",
            "name": "Wind Walk",
            "description": "Becomes invisible and gains 50% movement speed for 8 seconds. Next attack deals 150% damage.",
            "icon": "icons/abilities/naga/wind_walk.png",
            "cooldown": 25.0,
            "manaCost": 40,
            "targetType": "self",
            "duration": 8.0,
            "effects": [
                {"type": "invisibility"},
                {"type": "speed_bonus", "value": 0.5},
                {"type": "next_attack_bonus", "damage_multiplier": 1.5}
            ],
            "castAnimation": "vanish",
            "castSound": "sounds/abilities/wind_walk.wav"
        }
    ],

    "animations": {
        "idle": {"path": "animations/naga/couatl/hover.anim", "loop": true},
        "walk": {"path": "animations/naga/couatl/fly.anim", "speed": 1.0, "loop": true},
        "run": {"path": "animations/naga/couatl/fly_fast.anim", "speed": 1.2, "loop": true},
        "attack": {
            "path": "animations/naga/couatl/attack.anim",
            "loop": false,
            "events": [[0.3, "fire_projectile"]]
        },
        "storm_cast": {"path": "animations/naga/couatl/storm.anim", "loop": false},
        "vanish": {"path": "animations/naga/couatl/vanish.anim", "loop": false},
        "death": {"path": "animations/naga/couatl/death.anim", "loop": false}
    },

    "sounds": {
        "wingbeat": {
            "paths": ["sounds/wings/feather_flap_1.wav", "sounds/wings/feather_flap_2.wav"],
            "volume": 0.5,
            "interval": 0.5
        },
        "attack": "sounds/combat/lightning_strike.wav",
        "death": {"paths": ["sounds/death/couatl_death.wav"], "volume": 0.9},
        "select": "sounds/voice/naga/couatl_select.wav",
        "acknowledge": {"paths": ["sounds/voice/naga/couatl_screech.wav"]}
    },

    "ai": {
        "behaviorTree": "ai/behaviors/naga_couatl.bt",
        "profile": "skirmisher",
        "aggroRange": 16.0,
        "leashRange": 30.0,
        "preferAltitude": true,
        "hitAndRun": true
    },

    "production": {
        "building": "naga_hatchery",
        "time": 38.0,
        "cost": {
            "gold": 280,
            "coral": 80,
            "pearls": 50
        },
        "requirements": {
            "age": "age_reef",
            "techs": ["naga_flight_mastery"],
            "buildings": ["naga_temple_of_tides"]
        }
    },

    "properties": {
        "populationCost": 3,
        "supplyUpkeep": 2,
        "squadSize": 1,
        "experienceValue": 50,
        "bountyGold": 45
    },

    "upgrades": {
        "damage": ["naga_lightning_mastery"],
        "special": ["naga_wind_rider"]
    },

    "scripts": {
        "on_spawn": "scripts/units/naga/couatl/on_spawn.py",
        "on_death": "scripts/units/naga/couatl/on_death.py"
    }
}
