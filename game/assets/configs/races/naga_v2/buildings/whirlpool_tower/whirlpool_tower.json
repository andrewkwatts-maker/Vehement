{
  "$schema": "../../../../../schemas/building_archetype.schema.json",

  "parentArchetype": "tower",
  "id": "naga_whirlpool_tower",
  "name": "Whirlpool Tower",
  "description": "Defensive tower that generates powerful whirlpools to drag enemies down and damage them.",

  "category": "defense",
  "tier": 1,

  "size": {"width": 2, "height": 2, "footprintShape": "circle"},

  "placement": {
    "requiresLand": false,
    "canPlaceOnWater": true,
    "canPlaceOnLand": true,
    "waterProximityRequired": true,
    "minDistanceFromOther": 8.0
  },

  "health": 800,
  "healthRegen": 1.0,
  "armor": 8,
  "magicResist": 5,

  "attackCapability": {
    "canAttack": true,
    "damage": 25,
    "attackSpeed": 0.8,
    "attackRange": 11,
    "attackType": "magic",
    "targetAir": true,
    "targetGround": true,
    "splashDamage": {
      "enabled": true,
      "radius": 2.5,
      "damagePercent": 0.5
    },
    "specialEffect": {
      "type": "whirlpool",
      "pullStrength": 3.0,
      "pullDuration": 2.0,
      "slowPercent": 0.4
    }
  },

  "cost": {
    "gold": 180,
    "stone": 100,
    "mana": 80
  },

  "buildTime": 45,
  "requiredBuilding": "naga_coral_reef",
  "requiredAge": 0,

  "canUpgrade": true,
  "upgradesTo": "naga_maelstrom_tower",
  "upgradeCost": {
    "gold": 250,
    "stone": 150,
    "mana": 120
  },

  "visuals": {
    "model": "models/buildings/naga/whirlpool_tower.fbx",
    "icon": "textures/icons/buildings/naga/whirlpool_tower.png",
    "glowAtNight": true,
    "glowColor": "#00CCFF",
    "attackEffect": "effects/whirlpool_attack.fx",
    "bioluminescence": {
      "enabled": true,
      "intensity": 0.85,
      "patterns": ["spiral_glow", "water_vortex"]
    }
  },

  "sounds": {
    "attack": "sounds/buildings/naga/tower/whirlpool.wav",
    "ambient": "sounds/ambient/water_swirl.wav"
  },

  "modularBuilding": {
    "enabled": true,
    "maxComponents": 4,
    "allowedComponents": [
      "current_amplifier_component",
      "vortex_crystal_component"
    ]
  },

  "racialTraits": {
    "race": "naga",
    "waterMagic": true,
    "environmentalBonuses": {
      "inWater": {
        "attackRange": 1.2,
        "damage": 1.3,
        "attackSpeed": 1.15
      }
    }
  },

  "metadata": {
    "author": "Claude",
    "notes": "Defensive tower with whirlpool attacks. Pulls and slows enemies. Better in water."
  }
}
